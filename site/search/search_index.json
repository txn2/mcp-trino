{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>GitHub Go Reference</p>"},{"location":"#mcp-trino","title":"mcp-trino","text":"<p>The only composable MCP server for Trino</p>"},{"location":"#use-the-mcp-server","title":"Use the MCP Server","text":"<p>Query your Trino data warehouse from Claude, Cursor, or any MCP-compatible AI assistant. Set up in 5 minutes with secure defaults.</p> <p>Get Started :material-arrow-right:</p>"},{"location":"#build-with-the-go-library","title":"Build with the Go Library","text":"<p>Create custom MCP servers with authentication, tenant isolation, audit logging, and more. Import the packages into your own Go application.</p> <p>View Library :material-arrow-right:</p>"},{"location":"#why-mcp-trino","title":"Why mcp-trino?","text":"<p>Other Trino MCP servers are standalone applications. mcp-trino is the only one designed as a composable Go library.</p> Feature Other Servers mcp-trino Standalone server Yes Yes Composable library No Yes Custom middleware No Yes Query interceptors No Yes Result transformers No Yes Multi-server support No Yes Enterprise security Varies SLSA 3, Cosign"},{"location":"#sql-queries","title":"SQL Queries","text":"<p>Execute queries with configurable limits, timeouts, and output formats (JSON, CSV, Markdown).</p>"},{"location":"#schema-discovery","title":"Schema Discovery","text":"<p>Explore catalogs, schemas, tables, and columns. Preview sample data to understand your data.</p>"},{"location":"#multi-server","title":"Multi-Server","text":"<p>Connect to multiple Trino clusters from a single installation. Query production, staging, and dev.</p>"},{"location":"#secure-by-default","title":"Secure by Default","text":"<p>Read-only mode enabled by default. Query limits prevent data exfiltration. SLSA Level 3 provenance.</p>"},{"location":"library/","title":"Go Library","text":"<p>mcp-trino is the only composable Go library for Trino MCP. All other Trino MCP implementations are standalone servers. This library lets you build custom MCP servers with Trino capabilities.</p>"},{"location":"library/#why-build-a-custom-mcp-server","title":"Why Build a Custom MCP Server?","text":"<p>The standalone mcp-trino server works for most use cases. But enterprises and SaaS platforms need more:</p> Requirement Standalone Server Custom with Library Basic Trino queries Yes Yes Custom authentication No OAuth, API keys, SSO Multi-tenant isolation No Row-level security Audit logging Basic SOC2, compliance Combine data sources Trino only Trino + Postgres + APIs Custom business logic No Domain-specific tools"},{"location":"library/#use-cases","title":"Use Cases","text":""},{"location":"library/#multi-tenant-saas","title":"Multi-Tenant SaaS","text":"<p>Build a data platform where each customer only sees their own data:</p> <pre><code>// Add tenant isolation to all queries\ntoolkit.AddInterceptor(NewTenantFilterInterceptor(\"tenant_id\"))\n</code></pre>"},{"location":"library/#enterprise-authentication","title":"Enterprise Authentication","text":"<p>Integrate with your existing auth system:</p> <pre><code>// OAuth/OIDC authentication\ntoolkit.Use(NewOAuthMiddleware(authConfig))\n\n// API key validation\ntoolkit.Use(NewAPIKeyMiddleware(keyStore))\n</code></pre>"},{"location":"library/#compliance-and-audit","title":"Compliance and Audit","text":"<p>Meet SOC2, HIPAA, or GDPR requirements:</p> <pre><code>// Audit all queries for compliance\ntoolkit.AddInterceptor(NewAuditLogInterceptor(auditStore))\n\n// Redact sensitive data (PII, PHI)\ntoolkit.AddTransformer(NewRedactionTransformer(sensitiveColumns))\n</code></pre>"},{"location":"library/#unified-data-access","title":"Unified Data Access","text":"<p>Combine multiple data sources in one MCP server:</p> <pre><code>// Register Trino tools\ntrinoToolkit.RegisterAll(mcpServer)\n\n// Add PostgreSQL tools\npostgresToolkit.RegisterAll(mcpServer)\n\n// Add custom API tools\nregisterCustomTools(mcpServer)\n</code></pre>"},{"location":"library/#domain-specific-tools","title":"Domain-Specific Tools","text":"<p>Create tools tailored to your business:</p> <pre><code>// Custom \"get_customer_360\" tool\nmcpServer.AddTool(\"get_customer_360\", func(ctx context.Context, req CustomerRequest) (*CustomerData, error) {\n    // Combine data from multiple Trino tables\n    // Apply business logic\n    // Return formatted result\n})\n</code></pre>"},{"location":"library/#library-vs-server","title":"Library vs Server","text":"Feature Use Standalone Server Use Go Library Quick setup Use server Default security Use server Custom auth Use library Multi-tenant Use library Combine tools Use library Audit logging Use library Custom tools Use library"},{"location":"library/#getting-started","title":"Getting Started","text":""},{"location":"library/#install","title":"Install","text":"<pre><code>go get github.com/txn2/mcp-trino\n</code></pre>"},{"location":"library/#minimal-example","title":"Minimal Example","text":"<pre><code>package main\n\nimport (\n    \"github.com/modelcontextprotocol/go-sdk/server\"\n    \"github.com/txn2/mcp-trino/pkg/client\"\n    \"github.com/txn2/mcp-trino/pkg/tools\"\n)\n\nfunc main() {\n    // Create Trino client\n    trinoClient, _ := client.New(client.FromEnv())\n    defer trinoClient.Close()\n\n    // Create toolkit\n    toolkit := tools.NewToolkit(trinoClient, tools.DefaultConfig())\n\n    // Create MCP server\n    mcpServer := server.NewMCPServer(\"my-server\", \"1.0.0\")\n\n    // Register all Trino tools\n    toolkit.RegisterAll(mcpServer)\n\n    // Run\n    server.ServeStdio(mcpServer)\n}\n</code></pre> <p>This gives you a working MCP server with all Trino tools. From here, add middleware, interceptors, and transformers to meet your requirements.</p>"},{"location":"library/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Working examples with progressive enhancement</li> <li>Architecture - Package structure and request flow</li> <li>Extensibility - Middleware, interceptors, and transformers</li> </ul>"},{"location":"library/architecture/","title":"Architecture","text":"<p>Understanding the mcp-trino package structure and request flow.</p>"},{"location":"library/architecture/#package-structure","title":"Package Structure","text":"<pre><code>github.com/txn2/mcp-trino/\n\u251c\u2500\u2500 cmd/mcp-trino/           # Standalone server\n\u2502   \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 pkg/                      # Public API\n\u2502   \u251c\u2500\u2500 client/              # Trino client wrapper\n\u2502   \u2502   \u251c\u2500\u2500 client.go        # Connection and queries\n\u2502   \u2502   \u2514\u2500\u2500 config.go        # Configuration\n\u2502   \u251c\u2500\u2500 tools/               # MCP tool implementations\n\u2502   \u2502   \u251c\u2500\u2500 toolkit.go       # Tool registration\n\u2502   \u2502   \u251c\u2500\u2500 manager.go       # Multi-server connections\n\u2502   \u2502   \u251c\u2500\u2500 query.go         # trino_query\n\u2502   \u2502   \u251c\u2500\u2500 explain.go       # trino_explain\n\u2502   \u2502   \u2514\u2500\u2500 schema.go        # Schema tools\n\u2502   \u2514\u2500\u2500 extensions/          # Built-in extensions\n\u2502       \u251c\u2500\u2500 middleware.go    # Middleware framework\n\u2502       \u251c\u2500\u2500 interceptor.go   # Query interceptors\n\u2502       \u251c\u2500\u2500 transformer.go   # Result transformers\n\u2502       \u2514\u2500\u2500 builtin.go       # Built-in extensions\n\u2514\u2500\u2500 internal/                # Private implementation\n    \u2514\u2500\u2500 server/              # Default server setup\n</code></pre>"},{"location":"library/architecture/#component-diagram","title":"Component Diagram","text":"<pre><code>flowchart TB\n    subgraph External[\"External\"]\n        AI[\"AI Assistant\"]\n    end\n\n    subgraph MCP[\"Your MCP Server\"]\n        SDK[\"MCP SDK\"]\n        MW[\"Middleware\"]\n        TK[\"Toolkit\"]\n    end\n\n    subgraph McpTrino[\"mcp-trino/pkg\"]\n        Client[\"client.Client\"]\n        Tools[\"tools.Toolkit\"]\n        INT[\"Interceptors\"]\n        TF[\"Transformers\"]\n    end\n\n    subgraph Trino[\"Trino Cluster\"]\n        TS[\"Trino Server\"]\n    end\n\n    AI --&gt;|\"MCP Protocol\"| SDK\n    SDK --&gt; MW\n    MW --&gt; TK\n    TK --&gt; Tools\n    Tools --&gt; INT\n    INT --&gt; Client\n    Client --&gt;|\"SQL\"| TS\n    TS --&gt;|\"Results\"| Client\n    Client --&gt; TF\n    TF --&gt; Tools</code></pre>"},{"location":"library/architecture/#request-flow","title":"Request Flow","text":"<pre><code>sequenceDiagram\n    participant AI as AI Assistant\n    participant MCP as MCP Server\n    participant MW as Middleware Chain\n    participant INT as Interceptor Chain\n    participant Client as Trino Client\n    participant TF as Transformer Chain\n    participant Trino as Trino Server\n\n    AI-&gt;&gt;MCP: CallTool(trino_query)\n    MCP-&gt;&gt;MW: Before(context)\n\n    alt Authentication Failed\n        MW--&gt;&gt;MCP: Error: unauthorized\n        MCP--&gt;&gt;AI: Error response\n    end\n\n    MW-&gt;&gt;INT: Intercept(sql)\n\n    alt SQL Blocked\n        INT--&gt;&gt;MW: Error: blocked\n        MW--&gt;&gt;MCP: Error response\n        MCP--&gt;&gt;AI: Error response\n    end\n\n    INT-&gt;&gt;Client: Query(modified_sql)\n    Client-&gt;&gt;Trino: Execute SQL\n    Trino--&gt;&gt;Client: Results\n    Client-&gt;&gt;TF: Transform(results)\n    TF--&gt;&gt;MW: After(context, results)\n    MW--&gt;&gt;MCP: Final results\n    MCP--&gt;&gt;AI: CallToolResult</code></pre>"},{"location":"library/architecture/#components","title":"Components","text":""},{"location":"library/architecture/#client-pkgclient","title":"Client (<code>pkg/client</code>)","text":"<p>The Trino client wrapper handles connection management and query execution.</p> <pre><code>// Create from environment\ncfg := client.FromEnv()\ntrinoClient, err := client.New(cfg)\n\n// Or configure explicitly\ncfg := client.Config{\n    Host:     \"trino.example.com\",\n    Port:     443,\n    User:     \"analyst\",\n    Password: \"secret\",\n    Catalog:  \"hive\",\n    SSL:      true,\n}\ntrinoClient, err := client.New(cfg)\n</code></pre> <p>Key responsibilities:</p> <ul> <li>Connection pooling via <code>database/sql</code></li> <li>DSN generation for Trino driver</li> <li>Query execution with context/timeout support</li> <li>Resource cleanup</li> </ul>"},{"location":"library/architecture/#toolkit-pkgtools","title":"Toolkit (<code>pkg/tools</code>)","text":"<p>The toolkit manages MCP tool registration and coordinates extensions.</p> <pre><code>toolkit := tools.NewToolkit(trinoClient, tools.Config{\n    DefaultLimit:   1000,\n    MaxLimit:       10000,\n    DefaultTimeout: 120 * time.Second,\n    MaxTimeout:     300 * time.Second,\n})\n\n// Add extensions\ntoolkit.Use(middleware)\ntoolkit.AddInterceptor(interceptor)\ntoolkit.AddTransformer(transformer)\n\n// Register tools on MCP server\ntoolkit.RegisterAll(mcpServer)\n</code></pre> <p>Key responsibilities:</p> <ul> <li>Tool registration with MCP server</li> <li>Extension chain management</li> <li>Configuration enforcement (limits, timeouts)</li> <li>Multi-server connection management</li> </ul>"},{"location":"library/architecture/#manager-pkgtools","title":"Manager (<code>pkg/tools</code>)","text":"<p>Manages multiple Trino connections for multi-cluster deployments.</p> <pre><code>manager := tools.NewManager()\nmanager.Add(\"prod\", prodClient)\nmanager.Add(\"staging\", stagingClient)\nmanager.SetDefault(\"prod\")\n\ntoolkit := tools.NewToolkitWithManager(manager, cfg)\n</code></pre>"},{"location":"library/architecture/#extensions-pkgextensions","title":"Extensions (<code>pkg/extensions</code>)","text":"<p>Built-in extensions for common use cases:</p> Extension Type Purpose <code>LoggingMiddleware</code> Middleware Request/response logging <code>ReadOnlyMiddleware</code> Middleware Block write operations <code>MetricsMiddleware</code> Middleware Collect metrics <code>QueryLogInterceptor</code> Interceptor SQL audit logging <code>MetadataTransformer</code> Transformer Add execution metadata <code>ErrorHelpTransformer</code> Transformer Enhance error messages"},{"location":"library/architecture/#extension-execution-order","title":"Extension Execution Order","text":"<p>Extensions are executed in a specific order:</p> <pre><code>Request\n    \u2502\n    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Middleware 1    \u2502 Before()\n\u2502 Middleware 2    \u2502 Before()\n\u2502 Middleware 3    \u2502 Before()\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Interceptor 1   \u2502 Intercept(sql)\n\u2502 Interceptor 2   \u2502 Intercept(sql)\n\u2502 Interceptor 3   \u2502 Intercept(sql)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Execute Query  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Transformer 1   \u2502 Transform(result)\n\u2502 Transformer 2   \u2502 Transform(result)\n\u2502 Transformer 3   \u2502 Transform(result)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Middleware 3    \u2502 After()\n\u2502 Middleware 2    \u2502 After()\n\u2502 Middleware 1    \u2502 After()\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n    Response\n</code></pre> <p>Note: Middleware <code>After()</code> is called in reverse order.</p>"},{"location":"library/architecture/#tool-registration","title":"Tool Registration","text":"<p>The toolkit registers these MCP tools:</p> Tool Method Description <code>trino_query</code> <code>RegisterQuery</code> Execute SQL queries <code>trino_explain</code> <code>RegisterExplain</code> Analyze query plans <code>trino_list_catalogs</code> <code>RegisterListCatalogs</code> List catalogs <code>trino_list_schemas</code> <code>RegisterListSchemas</code> List schemas <code>trino_list_tables</code> <code>RegisterListTables</code> List tables <code>trino_describe_table</code> <code>RegisterDescribeTable</code> Describe table <code>trino_list_connections</code> <code>RegisterListConnections</code> List connections <p>Register all at once:</p> <pre><code>toolkit.RegisterAll(mcpServer)\n</code></pre> <p>Or selectively:</p> <pre><code>toolkit.RegisterQuery(mcpServer)\ntoolkit.RegisterExplain(mcpServer)\n// Skip others\n</code></pre>"},{"location":"library/architecture/#configuration-flow","title":"Configuration Flow","text":"<p>Configuration sources (in priority order):</p> <pre><code>flowchart LR\n    ENV[\"Environment Variables\"]\n    FILE[\"Config File (YAML)\"]\n    CODE[\"Go Code\"]\n    DEFAULTS[\"Defaults\"]\n\n    ENV --&gt;|\"Highest\"| MERGED[\"Merged Config\"]\n    FILE --&gt;|\"Medium\"| MERGED\n    CODE --&gt;|\"Medium\"| MERGED\n    DEFAULTS --&gt;|\"Lowest\"| MERGED</code></pre> <p>Example:</p> <pre><code>// Defaults\ncfg := tools.DefaultConfig()\n\n// Override in code\ncfg.MaxLimit = 5000\n\n// File config overrides code\nserverCfg, _ := extensions.FromFile(\"config.yaml\")\n\n// Environment overrides everything\n// TRINO_HOST, TRINO_USER, etc.\n</code></pre>"},{"location":"library/architecture/#thread-safety","title":"Thread Safety","text":"<p>All components are thread-safe:</p> <ul> <li>Client: Uses <code>database/sql</code> connection pool</li> <li>Toolkit: Thread-safe tool execution</li> <li>ToolContext: Uses <code>sync.Map</code> for values</li> <li>Manager: Thread-safe connection lookup</li> </ul>"},{"location":"library/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Extensibility - Build custom middleware, interceptors, and transformers</li> </ul>"},{"location":"library/extensibility/","title":"Extensibility","text":"<p>mcp-trino provides three extension points for customizing behavior: middleware, interceptors, and transformers.</p>"},{"location":"library/extensibility/#overview","title":"Overview","text":"Extension Type When Purpose Middleware Before/after tool execution Authentication, logging, rate limiting Interceptors Before SQL execution Query validation, rewriting, audit Transformers After query execution Result modification, redaction, enrichment <pre><code>flowchart LR\n    REQ[\"Request\"] --&gt; MW[\"Middleware\"]\n    MW --&gt; INT[\"Interceptors\"]\n    INT --&gt; SQL[\"SQL Execution\"]\n    SQL --&gt; TF[\"Transformers\"]\n    TF --&gt; MW2[\"Middleware\"]\n    MW2 --&gt; RES[\"Response\"]</code></pre>"},{"location":"library/extensibility/#middleware","title":"Middleware","text":"<p>Middleware intercepts tool calls before and after execution.</p>"},{"location":"library/extensibility/#interface","title":"Interface","text":"<pre><code>type ToolMiddleware interface {\n    Before(ctx *ToolContext) error\n    After(ctx *ToolContext, result *mcp.CallToolResult, err error)\n}\n</code></pre>"},{"location":"library/extensibility/#toolcontext","title":"ToolContext","text":"<p>The context carries request information through the chain:</p> <pre><code>type ToolContext struct {\n    ToolName   string\n    Arguments  map[string]interface{}\n    StartTime  time.Time\n    RequestID  string\n    values     sync.Map\n}\n\n// Store and retrieve custom values\nctx.Set(\"user_id\", userID)\nuserID, ok := ctx.Get(\"user_id\")\n</code></pre>"},{"location":"library/extensibility/#example-authentication","title":"Example: Authentication","text":"<pre><code>type AuthMiddleware struct {\n    validator TokenValidator\n}\n\nfunc (m *AuthMiddleware) Before(ctx *ToolContext) error {\n    token, ok := ctx.Get(\"auth_token\")\n    if !ok {\n        return errors.New(\"authentication required\")\n    }\n\n    user, err := m.validator.Validate(token.(string))\n    if err != nil {\n        return fmt.Errorf(\"invalid token: %w\", err)\n    }\n\n    ctx.Set(\"user\", user)\n    return nil\n}\n\nfunc (m *AuthMiddleware) After(ctx *ToolContext, result *mcp.CallToolResult, err error) {\n    user, _ := ctx.Get(\"user\")\n    log.Printf(\"User %s accessed %s\", user, ctx.ToolName)\n}\n</code></pre>"},{"location":"library/extensibility/#example-rate-limiting","title":"Example: Rate Limiting","text":"<pre><code>type RateLimitMiddleware struct {\n    limiter *rate.Limiter\n}\n\nfunc NewRateLimitMiddleware(rps float64, burst int) *RateLimitMiddleware {\n    return &amp;RateLimitMiddleware{\n        limiter: rate.NewLimiter(rate.Limit(rps), burst),\n    }\n}\n\nfunc (m *RateLimitMiddleware) Before(ctx *ToolContext) error {\n    if !m.limiter.Allow() {\n        return errors.New(\"rate limit exceeded\")\n    }\n    return nil\n}\n\nfunc (m *RateLimitMiddleware) After(ctx *ToolContext, result *mcp.CallToolResult, err error) {}\n</code></pre>"},{"location":"library/extensibility/#example-request-logging","title":"Example: Request Logging","text":"<pre><code>type RequestLogMiddleware struct {\n    output io.Writer\n}\n\nfunc (m *RequestLogMiddleware) Before(ctx *ToolContext) error {\n    json.NewEncoder(m.output).Encode(map[string]interface{}{\n        \"event\":      \"request_start\",\n        \"request_id\": ctx.RequestID,\n        \"tool\":       ctx.ToolName,\n        \"timestamp\":  ctx.StartTime.Format(time.RFC3339),\n    })\n    return nil\n}\n\nfunc (m *RequestLogMiddleware) After(ctx *ToolContext, result *mcp.CallToolResult, err error) {\n    status := \"success\"\n    if err != nil {\n        status = \"error\"\n    }\n    json.NewEncoder(m.output).Encode(map[string]interface{}{\n        \"event\":       \"request_end\",\n        \"request_id\":  ctx.RequestID,\n        \"tool\":        ctx.ToolName,\n        \"status\":      status,\n        \"duration_ms\": time.Since(ctx.StartTime).Milliseconds(),\n    })\n}\n</code></pre>"},{"location":"library/extensibility/#middleware-chain","title":"Middleware Chain","text":"<p>Middleware executes in order added. <code>After()</code> runs in reverse:</p> <pre><code>toolkit.Use(loggingMiddleware)    // 1st Before, Last After\ntoolkit.Use(authMiddleware)       // 2nd Before, 2nd-to-last After\ntoolkit.Use(rateLimitMiddleware)  // 3rd Before, 3rd-to-last After\n</code></pre> <p>If <code>Before()</code> returns an error, the chain stops and the tool doesn't execute.</p>"},{"location":"library/extensibility/#interceptors","title":"Interceptors","text":"<p>Interceptors transform SQL before execution.</p>"},{"location":"library/extensibility/#interface_1","title":"Interface","text":"<pre><code>type QueryInterceptor interface {\n    Intercept(ctx context.Context, sql string) (string, error)\n}\n</code></pre>"},{"location":"library/extensibility/#example-sql-validation","title":"Example: SQL Validation","text":"<pre><code>type SQLValidatorInterceptor struct {\n    blockedPatterns []*regexp.Regexp\n}\n\nfunc NewSQLValidatorInterceptor(patterns []string) *SQLValidatorInterceptor {\n    compiled := make([]*regexp.Regexp, len(patterns))\n    for i, p := range patterns {\n        compiled[i] = regexp.MustCompile(p)\n    }\n    return &amp;SQLValidatorInterceptor{blockedPatterns: compiled}\n}\n\nfunc (i *SQLValidatorInterceptor) Intercept(ctx context.Context, sql string) (string, error) {\n    normalized := strings.ToUpper(sql)\n    for _, pattern := range i.blockedPatterns {\n        if pattern.MatchString(normalized) {\n            return \"\", fmt.Errorf(\"SQL pattern blocked by security policy\")\n        }\n    }\n    return sql, nil\n}\n</code></pre>"},{"location":"library/extensibility/#example-tenant-filter","title":"Example: Tenant Filter","text":"<pre><code>type TenantFilterInterceptor struct {\n    column string\n}\n\nfunc (i *TenantFilterInterceptor) Intercept(ctx context.Context, sql string) (string, error) {\n    tenant := ctx.Value(\"tenant\")\n    if tenant == nil {\n        return \"\", errors.New(\"tenant not found in context\")\n    }\n\n    // Wrap query with tenant filter\n    return fmt.Sprintf(\n        \"SELECT * FROM (%s) WHERE %s = '%s'\",\n        sql, i.column, tenant,\n    ), nil\n}\n</code></pre>"},{"location":"library/extensibility/#example-audit-logging","title":"Example: Audit Logging","text":"<pre><code>type AuditLogInterceptor struct {\n    output io.Writer\n}\n\nfunc (i *AuditLogInterceptor) Intercept(ctx context.Context, sql string) (string, error) {\n    json.NewEncoder(i.output).Encode(map[string]interface{}{\n        \"timestamp\": time.Now().Format(time.RFC3339),\n        \"event\":     \"query_executed\",\n        \"sql\":       sql,\n        \"user\":      ctx.Value(\"user\"),\n    })\n    return sql, nil // Pass through unchanged\n}\n</code></pre>"},{"location":"library/extensibility/#example-schema-rewriting","title":"Example: Schema Rewriting","text":"<pre><code>type SchemaRewriteInterceptor struct {\n    from, to string\n}\n\nfunc (i *SchemaRewriteInterceptor) Intercept(ctx context.Context, sql string) (string, error) {\n    pattern := regexp.MustCompile(`\\b` + i.from + `\\.`)\n    return pattern.ReplaceAllString(sql, i.to+\".\"), nil\n}\n</code></pre>"},{"location":"library/extensibility/#interceptor-chain","title":"Interceptor Chain","text":"<p>Each interceptor receives the output of the previous one:</p> <pre><code>toolkit.AddInterceptor(auditInterceptor)      // 1st - logs original\ntoolkit.AddInterceptor(validatorInterceptor)  // 2nd - validates\ntoolkit.AddInterceptor(rewriteInterceptor)    // 3rd - rewrites\n</code></pre> <p>Return an error to block execution.</p>"},{"location":"library/extensibility/#transformers","title":"Transformers","text":"<p>Transformers modify query results before returning to the client.</p>"},{"location":"library/extensibility/#interface_2","title":"Interface","text":"<pre><code>type ResultTransformer interface {\n    Transform(ctx context.Context, result *QueryResult) (*QueryResult, error)\n}\n\ntype QueryResult struct {\n    Columns  []string\n    Rows     [][]interface{}\n    RowCount int\n    Metadata map[string]interface{}\n}\n</code></pre>"},{"location":"library/extensibility/#example-data-redaction","title":"Example: Data Redaction","text":"<pre><code>type RedactionTransformer struct {\n    sensitiveColumns map[string]bool\n    redactedValue    string\n}\n\nfunc NewRedactionTransformer(columns []string) *RedactionTransformer {\n    sensitive := make(map[string]bool)\n    for _, col := range columns {\n        sensitive[strings.ToLower(col)] = true\n    }\n    return &amp;RedactionTransformer{\n        sensitiveColumns: sensitive,\n        redactedValue:    \"***REDACTED***\",\n    }\n}\n\nfunc (t *RedactionTransformer) Transform(ctx context.Context, result *QueryResult) (*QueryResult, error) {\n    // Find sensitive column indices\n    sensitiveIndices := make(map[int]bool)\n    for i, col := range result.Columns {\n        if t.sensitiveColumns[strings.ToLower(col)] {\n            sensitiveIndices[i] = true\n        }\n    }\n\n    // Redact values\n    for _, row := range result.Rows {\n        for i := range row {\n            if sensitiveIndices[i] {\n                row[i] = t.redactedValue\n            }\n        }\n    }\n\n    return result, nil\n}\n</code></pre>"},{"location":"library/extensibility/#example-metadata-enrichment","title":"Example: Metadata Enrichment","text":"<pre><code>type MetadataTransformer struct{}\n\nfunc (t *MetadataTransformer) Transform(ctx context.Context, result *QueryResult) (*QueryResult, error) {\n    if result.Metadata == nil {\n        result.Metadata = make(map[string]interface{})\n    }\n\n    result.Metadata[\"row_count\"] = result.RowCount\n    result.Metadata[\"column_count\"] = len(result.Columns)\n    result.Metadata[\"timestamp\"] = time.Now().Format(time.RFC3339)\n\n    return result, nil\n}\n</code></pre>"},{"location":"library/extensibility/#example-date-formatting","title":"Example: Date Formatting","text":"<pre><code>type DateFormatTransformer struct {\n    outputFormat string\n    dateColumns  map[string]bool\n}\n\nfunc (t *DateFormatTransformer) Transform(ctx context.Context, result *QueryResult) (*QueryResult, error) {\n    dateIndices := make(map[int]bool)\n    for i, col := range result.Columns {\n        if t.dateColumns[strings.ToLower(col)] {\n            dateIndices[i] = true\n        }\n    }\n\n    for _, row := range result.Rows {\n        for i := range row {\n            if dateIndices[i] {\n                if ts, ok := row[i].(time.Time); ok {\n                    row[i] = ts.Format(t.outputFormat)\n                }\n            }\n        }\n    }\n\n    return result, nil\n}\n</code></pre>"},{"location":"library/extensibility/#transformer-chain","title":"Transformer Chain","text":"<p>Each transformer receives the output of the previous one:</p> <pre><code>toolkit.AddTransformer(redactionTransformer)   // 1st - redact sensitive\ntoolkit.AddTransformer(dateFormatTransformer)  // 2nd - format dates\ntoolkit.AddTransformer(metadataTransformer)    // 3rd - add metadata\n</code></pre>"},{"location":"library/extensibility/#built-in-extensions","title":"Built-in Extensions","text":"<p>mcp-trino includes ready-to-use extensions:</p> <pre><code>import \"github.com/txn2/mcp-trino/pkg/extensions\"\n\n// Middleware\ntoolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\ntoolkit.Use(extensions.NewReadOnlyMiddleware())\ntoolkit.Use(extensions.NewMetricsMiddleware(collector))\n\n// Interceptors\ntoolkit.AddInterceptor(extensions.NewQueryLogInterceptor(os.Stderr))\ntoolkit.AddInterceptor(extensions.NewReadOnlyInterceptor())\n\n// Transformers\ntoolkit.AddTransformer(extensions.NewMetadataTransformer())\ntoolkit.AddTransformer(extensions.NewErrorHelpTransformer())\n</code></pre>"},{"location":"library/extensibility/#complete-example","title":"Complete Example","text":"<p>Production server with all extension types:</p> <pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n\n    \"github.com/modelcontextprotocol/go-sdk/server\"\n\n    \"github.com/txn2/mcp-trino/pkg/client\"\n    \"github.com/txn2/mcp-trino/pkg/extensions\"\n    \"github.com/txn2/mcp-trino/pkg/tools\"\n)\n\nfunc main() {\n    trinoClient, _ := client.New(client.FromEnv())\n    defer trinoClient.Close()\n\n    toolkit := tools.NewToolkit(trinoClient, tools.DefaultConfig())\n\n    // Middleware: auth, logging, rate limiting\n    toolkit.Use(&amp;AuthMiddleware{validator: tokenValidator})\n    toolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\n    toolkit.Use(&amp;RateLimitMiddleware{limiter: rateLimiter})\n    toolkit.Use(extensions.NewReadOnlyMiddleware())\n\n    // Interceptors: audit, validation, tenant filter\n    toolkit.AddInterceptor(&amp;AuditLogInterceptor{output: auditFile})\n    toolkit.AddInterceptor(NewSQLValidatorInterceptor(blockedPatterns))\n    toolkit.AddInterceptor(&amp;TenantFilterInterceptor{column: \"tenant_id\"})\n\n    // Transformers: redaction, metadata\n    toolkit.AddTransformer(NewRedactionTransformer([]string{\"ssn\", \"credit_card\"}))\n    toolkit.AddTransformer(extensions.NewMetadataTransformer())\n\n    mcpServer := server.NewMCPServer(\"enterprise-server\", \"1.0.0\")\n    toolkit.RegisterAll(mcpServer)\n\n    if err := server.ServeStdio(mcpServer); err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre>"},{"location":"library/extensibility/#testing-extensions","title":"Testing Extensions","text":""},{"location":"library/extensibility/#testing-middleware","title":"Testing Middleware","text":"<pre><code>func TestAuthMiddleware(t *testing.T) {\n    mw := &amp;AuthMiddleware{validator: mockValidator}\n\n    ctx := &amp;ToolContext{}\n    ctx.Set(\"auth_token\", \"valid-token\")\n\n    err := mw.Before(ctx)\n    assert.NoError(t, err)\n\n    user, ok := ctx.Get(\"user\")\n    assert.True(t, ok)\n    assert.Equal(t, \"test-user\", user)\n}\n</code></pre>"},{"location":"library/extensibility/#testing-interceptors","title":"Testing Interceptors","text":"<pre><code>func TestSQLValidator(t *testing.T) {\n    interceptor := NewSQLValidatorInterceptor([]string{`DROP\\s+TABLE`})\n\n    tests := []struct {\n        sql     string\n        wantErr bool\n    }{\n        {\"SELECT * FROM users\", false},\n        {\"DROP TABLE users\", true},\n    }\n\n    for _, tt := range tests {\n        _, err := interceptor.Intercept(context.Background(), tt.sql)\n        if tt.wantErr {\n            assert.Error(t, err)\n        } else {\n            assert.NoError(t, err)\n        }\n    }\n}\n</code></pre>"},{"location":"library/extensibility/#testing-transformers","title":"Testing Transformers","text":"<pre><code>func TestRedactionTransformer(t *testing.T) {\n    transformer := NewRedactionTransformer([]string{\"password\"})\n\n    result := &amp;QueryResult{\n        Columns: []string{\"id\", \"name\", \"password\"},\n        Rows: [][]interface{}{\n            {1, \"Alice\", \"secret123\"},\n        },\n    }\n\n    transformed, err := transformer.Transform(context.Background(), result)\n    assert.NoError(t, err)\n    assert.Equal(t, \"***REDACTED***\", transformed.Rows[0][2])\n}\n</code></pre>"},{"location":"library/quickstart/","title":"Quick Start","text":"<p>Build a custom MCP server with Trino capabilities in minutes.</p>"},{"location":"library/quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.21+</li> <li>Access to a Trino server</li> </ul>"},{"location":"library/quickstart/#step-1-minimal-server","title":"Step 1: Minimal Server","text":"<p>Create a basic MCP server with all Trino tools:</p> <pre><code>// main.go\npackage main\n\nimport (\n    \"log\"\n\n    \"github.com/modelcontextprotocol/go-sdk/server\"\n    \"github.com/txn2/mcp-trino/pkg/client\"\n    \"github.com/txn2/mcp-trino/pkg/tools\"\n)\n\nfunc main() {\n    // Create Trino client from environment\n    trinoClient, err := client.New(client.FromEnv())\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer trinoClient.Close()\n\n    // Create toolkit with default config\n    toolkit := tools.NewToolkit(trinoClient, tools.DefaultConfig())\n\n    // Create MCP server\n    mcpServer := server.NewMCPServer(\"my-trino-server\", \"1.0.0\")\n\n    // Register all Trino tools\n    toolkit.RegisterAll(mcpServer)\n\n    // Run server\n    if err := server.ServeStdio(mcpServer); err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre> <p>Build and run:</p> <pre><code>export TRINO_HOST=trino.example.com\nexport TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\nexport TRINO_CATALOG=hive\n\ngo build -o my-server\n./my-server\n</code></pre>"},{"location":"library/quickstart/#step-2-add-logging","title":"Step 2: Add Logging","text":"<p>Add request logging to see what's happening:</p> <pre><code>import (\n    \"os\"\n\n    \"github.com/txn2/mcp-trino/pkg/extensions\"\n)\n\nfunc main() {\n    trinoClient, _ := client.New(client.FromEnv())\n    toolkit := tools.NewToolkit(trinoClient, tools.DefaultConfig())\n\n    // Add logging middleware\n    toolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\n\n    mcpServer := server.NewMCPServer(\"my-trino-server\", \"1.0.0\")\n    toolkit.RegisterAll(mcpServer)\n    server.ServeStdio(mcpServer)\n}\n</code></pre> <p>Now you'll see JSON logs for each request:</p> <pre><code>{\"event\":\"request_start\",\"tool\":\"trino_query\",\"request_id\":\"abc123\"}\n{\"event\":\"request_success\",\"tool\":\"trino_query\",\"duration_ms\":150}\n</code></pre>"},{"location":"library/quickstart/#step-3-add-read-only-protection","title":"Step 3: Add Read-Only Protection","text":"<p>Block write operations (INSERT, UPDATE, DELETE):</p> <pre><code>// Add logging and read-only protection\ntoolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\ntoolkit.Use(extensions.NewReadOnlyMiddleware())\n</code></pre> <p>Now dangerous queries are blocked:</p> <pre><code>Error: Write operations are not allowed (INSERT, UPDATE, DELETE, DROP, etc.)\n</code></pre>"},{"location":"library/quickstart/#step-4-add-query-logging","title":"Step 4: Add Query Logging","text":"<p>Log all SQL queries for audit:</p> <pre><code>// Middleware for request lifecycle\ntoolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\ntoolkit.Use(extensions.NewReadOnlyMiddleware())\n\n// Interceptor for SQL queries\ntoolkit.AddInterceptor(extensions.NewQueryLogInterceptor(os.Stderr))\n</code></pre> <p>SQL queries are now logged:</p> <pre><code>{\"event\":\"query\",\"sql\":\"SELECT * FROM users LIMIT 10\",\"timestamp\":\"2024-01-15T10:30:00Z\"}\n</code></pre>"},{"location":"library/quickstart/#step-5-add-result-metadata","title":"Step 5: Add Result Metadata","text":"<p>Include execution stats in query results:</p> <pre><code>// Middleware\ntoolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\ntoolkit.Use(extensions.NewReadOnlyMiddleware())\n\n// Interceptor\ntoolkit.AddInterceptor(extensions.NewQueryLogInterceptor(os.Stderr))\n\n// Transformer\ntoolkit.AddTransformer(extensions.NewMetadataTransformer())\n</code></pre> <p>Results now include metadata:</p> <pre><code>{\n  \"rows\": [...],\n  \"metadata\": {\n    \"row_count\": 10,\n    \"execution_time_ms\": 150,\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\n  }\n}\n</code></pre>"},{"location":"library/quickstart/#step-6-custom-authentication","title":"Step 6: Custom Authentication","text":"<p>Add your own authentication:</p> <pre><code>type AuthMiddleware struct {\n    validator TokenValidator\n}\n\nfunc (m *AuthMiddleware) Before(ctx *tools.ToolContext) error {\n    token, ok := ctx.Get(\"auth_token\")\n    if !ok {\n        return errors.New(\"authentication required\")\n    }\n\n    user, err := m.validator.Validate(token.(string))\n    if err != nil {\n        return fmt.Errorf(\"invalid token: %w\", err)\n    }\n\n    ctx.Set(\"user\", user)\n    return nil\n}\n\nfunc (m *AuthMiddleware) After(ctx *tools.ToolContext, result *mcp.CallToolResult, err error) {\n    // Log access\n    user, _ := ctx.Get(\"user\")\n    log.Printf(\"User %s called %s\", user, ctx.ToolName)\n}\n\n// Use it\ntoolkit.Use(&amp;AuthMiddleware{validator: myValidator})\n</code></pre>"},{"location":"library/quickstart/#step-7-tenant-isolation","title":"Step 7: Tenant Isolation","text":"<p>Filter queries by tenant:</p> <pre><code>type TenantInterceptor struct {\n    column string\n}\n\nfunc (i *TenantInterceptor) Intercept(ctx context.Context, sql string) (string, error) {\n    tenant := ctx.Value(\"tenant\")\n    if tenant == nil {\n        return \"\", errors.New(\"tenant not set\")\n    }\n\n    // Wrap query with tenant filter\n    return fmt.Sprintf(\n        \"SELECT * FROM (%s) WHERE %s = '%s'\",\n        sql, i.column, tenant,\n    ), nil\n}\n\n// Use it\ntoolkit.AddInterceptor(&amp;TenantInterceptor{column: \"tenant_id\"})\n</code></pre>"},{"location":"library/quickstart/#complete-example","title":"Complete Example","text":"<p>Here's a production-ready server with all extensions:</p> <pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n    \"time\"\n\n    \"github.com/modelcontextprotocol/go-sdk/server\"\n\n    \"github.com/txn2/mcp-trino/pkg/client\"\n    \"github.com/txn2/mcp-trino/pkg/extensions\"\n    \"github.com/txn2/mcp-trino/pkg/tools\"\n)\n\nfunc main() {\n    // Create client\n    trinoClient, err := client.New(client.FromEnv())\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer trinoClient.Close()\n\n    // Configure toolkit\n    cfg := tools.Config{\n        DefaultLimit:   1000,\n        MaxLimit:       5000,\n        DefaultTimeout: 60 * time.Second,\n        MaxTimeout:     180 * time.Second,\n    }\n    toolkit := tools.NewToolkit(trinoClient, cfg)\n\n    // Add middleware (executed in order)\n    toolkit.Use(extensions.NewLoggingMiddleware(os.Stderr))\n    toolkit.Use(extensions.NewReadOnlyMiddleware())\n\n    // Add interceptors\n    toolkit.AddInterceptor(extensions.NewQueryLogInterceptor(os.Stderr))\n\n    // Add transformers\n    toolkit.AddTransformer(extensions.NewMetadataTransformer())\n\n    // Create and run server\n    mcpServer := server.NewMCPServer(\"production-server\", \"1.0.0\")\n    toolkit.RegisterAll(mcpServer)\n\n    if err := server.ServeStdio(mcpServer); err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre>"},{"location":"library/quickstart/#multi-server-configuration","title":"Multi-Server Configuration","text":"<p>Connect to multiple Trino clusters:</p> <pre><code>// Create connection manager\nmanager := tools.NewManager()\n\n// Add connections\nprodClient, _ := client.New(client.Config{Host: \"prod.trino.example.com\", ...})\nstagingClient, _ := client.New(client.Config{Host: \"staging.trino.example.com\", ...})\n\nmanager.Add(\"production\", prodClient)\nmanager.Add(\"staging\", stagingClient)\nmanager.SetDefault(\"production\")\n\n// Create toolkit with manager\ntoolkit := tools.NewToolkitWithManager(manager, tools.DefaultConfig())\n</code></pre> <p>Users can now specify which connection to use:</p> <pre><code>{\"tool\": \"trino_query\", \"arguments\": {\"sql\": \"SELECT * FROM users\", \"connection\": \"staging\"}}\n</code></pre>"},{"location":"library/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture - Understand the package structure</li> <li>Extensibility - Deep dive into middleware, interceptors, and transformers</li> </ul>"},{"location":"reference/","title":"Reference","text":"<p>Complete technical reference for mcp-trino.</p>"},{"location":"reference/#quick-links","title":"Quick Links","text":"Section Description Tools API All tool parameters, responses, and error codes Configuration Environment variables and YAML schema Security Limits, authentication, and verification"},{"location":"reference/#tools","title":"Tools","text":"Tool Description <code>trino_query</code> Execute SQL queries with limits and timeouts <code>trino_explain</code> Get query execution plans <code>trino_list_catalogs</code> List available data catalogs <code>trino_list_schemas</code> List schemas in a catalog <code>trino_list_tables</code> List tables with optional pattern filter <code>trino_describe_table</code> Get column definitions and sample data <code>trino_list_connections</code> List configured server connections"},{"location":"reference/#environment-variables","title":"Environment Variables","text":""},{"location":"reference/#connection","title":"Connection","text":"Variable Default Description <code>TRINO_HOST</code> <code>localhost</code> Server hostname <code>TRINO_PORT</code> <code>443</code>/<code>8080</code> Server port <code>TRINO_USER</code> (required) Username <code>TRINO_PASSWORD</code> Password <code>TRINO_CATALOG</code> <code>memory</code> Default catalog <code>TRINO_SCHEMA</code> <code>default</code> Default schema <code>TRINO_SSL</code> <code>true</code> Enable HTTPS"},{"location":"reference/#extensions","title":"Extensions","text":"Variable Default Description <code>MCP_TRINO_EXT_READONLY</code> <code>true</code> Block write operations <code>MCP_TRINO_EXT_LOGGING</code> <code>false</code> Enable request logging <code>MCP_TRINO_EXT_ERRORS</code> <code>true</code> Add helpful error hints"},{"location":"reference/#limits","title":"Limits","text":"Limit Default Maximum Row limit 1000 10000 Query timeout 120s 300s"},{"location":"reference/#blocked-operations-read-only-mode","title":"Blocked Operations (Read-Only Mode)","text":"<ul> <li>INSERT</li> <li>UPDATE</li> <li>DELETE</li> <li>DROP</li> <li>CREATE</li> <li>ALTER</li> <li>TRUNCATE</li> <li>MERGE</li> </ul>"},{"location":"reference/#release-verification","title":"Release Verification","text":"<p>All releases include:</p> <ul> <li>Checksums - SHA256 verification</li> <li>SLSA Provenance - Level 3 build attestation</li> <li>Cosign Signatures - Keyless verification</li> </ul> <pre><code># Verify with Cosign\ncosign verify-blob \\\n  --bundle mcp-trino_*.tar.gz.sigstore.json \\\n  mcp-trino_*.tar.gz\n</code></pre>"},{"location":"reference/configuration/","title":"Configuration Reference","text":"<p>Complete reference for all configuration options.</p>"},{"location":"reference/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"reference/configuration/#connection-settings","title":"Connection Settings","text":"Variable Type Default Description <code>TRINO_HOST</code> string <code>localhost</code> Trino server hostname <code>TRINO_PORT</code> integer <code>443</code> (SSL) / <code>8080</code> (no SSL) Server port <code>TRINO_USER</code> string (required) Authentication username <code>TRINO_PASSWORD</code> string (empty) Authentication password <code>TRINO_CATALOG</code> string <code>memory</code> Default catalog <code>TRINO_SCHEMA</code> string <code>default</code> Default schema <code>TRINO_SSL</code> boolean <code>true</code> for remote Enable HTTPS <code>TRINO_SSL_VERIFY</code> boolean <code>true</code> Verify SSL certificates <code>TRINO_TIMEOUT</code> integer <code>120</code> Query timeout (seconds) <code>TRINO_SOURCE</code> string <code>mcp-trino</code> Client identifier"},{"location":"reference/configuration/#extension-settings","title":"Extension Settings","text":"Variable Type Default Description <code>MCP_TRINO_EXT_READONLY</code> boolean <code>true</code> Block write operations <code>MCP_TRINO_EXT_ERRORS</code> boolean <code>true</code> Add helpful hints to errors <code>MCP_TRINO_EXT_LOGGING</code> boolean <code>false</code> Enable request logging <code>MCP_TRINO_EXT_METRICS</code> boolean <code>false</code> Enable metrics collection <code>MCP_TRINO_EXT_QUERYLOG</code> boolean <code>false</code> Log all SQL queries <code>MCP_TRINO_EXT_METADATA</code> boolean <code>false</code> Add execution stats to results"},{"location":"reference/configuration/#multi-server-settings","title":"Multi-Server Settings","text":"Variable Type Default Description <code>TRINO_ADDITIONAL_SERVERS</code> JSON (empty) Additional server configurations"},{"location":"reference/configuration/#file-configuration","title":"File Configuration","text":"Variable Type Default Description <code>MCP_TRINO_CONFIG</code> string (empty) Path to YAML config file"},{"location":"reference/configuration/#yaml-configuration-schema","title":"YAML Configuration Schema","text":"<pre><code># /etc/mcp-trino/config.yaml\n\n# Trino connection settings\ntrino:\n  host: trino.example.com       # Required\n  port: 443                      # Optional, default: 443/8080\n  user: ${TRINO_USER}           # Environment variable expansion\n  password: ${TRINO_PASSWORD}   # Environment variable expansion\n  catalog: hive                  # Optional, default: memory\n  schema: default                # Optional, default: default\n  ssl: true                      # Optional, default: true for remote\n  ssl_verify: true               # Optional, default: true\n  timeout: 120s                  # Optional, default: 120s\n  source: mcp-trino              # Optional, default: mcp-trino\n\n# Toolkit settings\ntoolkit:\n  default_limit: 1000            # Optional, default: 1000\n  max_limit: 10000               # Optional, default: 10000\n  default_timeout: 120s          # Optional, default: 120s\n  max_timeout: 300s              # Optional, default: 300s\n\n# Extension settings\nextensions:\n  readonly: true                 # Optional, default: true\n  logging: false                 # Optional, default: false\n  metrics: false                 # Optional, default: false\n  errors: true                   # Optional, default: true\n  querylog: false                # Optional, default: false\n  metadata: false                # Optional, default: false\n\n# Additional servers (multi-server mode)\nadditional_servers:\n  staging:\n    host: staging.trino.example.com\n    # Inherits user/password from primary\n  dev:\n    host: localhost\n    port: 8080\n    user: admin\n    password: \"\"\n    ssl: false\n</code></pre>"},{"location":"reference/configuration/#configuration-precedence","title":"Configuration Precedence","text":"<p>Configuration values are merged in this order (later overrides earlier):</p> <ol> <li>Defaults - Built-in defaults</li> <li>Config file - Values from YAML file</li> <li>Environment variables - Always highest priority</li> </ol> <p>This allows base settings in a config file with secrets from environment variables:</p> <pre><code># config.yaml - non-sensitive settings\ntrino:\n  host: trino.example.com\n  catalog: hive\n  ssl: true\n</code></pre> <pre><code># Environment - secrets only\nexport TRINO_USER=service_account\nexport TRINO_PASSWORD=secret\nexport MCP_TRINO_CONFIG=/etc/mcp-trino/config.yaml\n</code></pre>"},{"location":"reference/configuration/#multi-server-configuration","title":"Multi-Server Configuration","text":""},{"location":"reference/configuration/#environment-variable-format","title":"Environment Variable Format","text":"<pre><code>export TRINO_ADDITIONAL_SERVERS='{\n  \"staging\": {\n    \"host\": \"staging.trino.example.com\"\n  },\n  \"dev\": {\n    \"host\": \"localhost\",\n    \"port\": 8080,\n    \"ssl\": false\n  }\n}'\n</code></pre>"},{"location":"reference/configuration/#server-configuration-fields","title":"Server Configuration Fields","text":"Field Type Required Description <code>host</code> string Yes Server hostname <code>port</code> integer No Server port <code>user</code> string No Username (inherits from primary) <code>password</code> string No Password (inherits from primary) <code>catalog</code> string No Default catalog <code>schema</code> string No Default schema <code>ssl</code> boolean No Enable HTTPS"},{"location":"reference/configuration/#credential-inheritance","title":"Credential Inheritance","text":"<p>Additional servers inherit credentials from the primary unless overridden:</p> <pre><code># Primary credentials\nexport TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\n\n# Staging inherits analyst/secret\n# Dev uses admin with no password\nexport TRINO_ADDITIONAL_SERVERS='{\n  \"staging\": {\n    \"host\": \"staging.trino.example.com\"\n  },\n  \"dev\": {\n    \"host\": \"localhost\",\n    \"port\": 8080,\n    \"user\": \"admin\",\n    \"password\": \"\",\n    \"ssl\": false\n  }\n}'\n</code></pre>"},{"location":"reference/configuration/#boolean-values","title":"Boolean Values","text":"<p>Boolean environment variables accept:</p> True False <code>true</code>, <code>1</code>, <code>yes</code>, <code>on</code> <code>false</code>, <code>0</code>, <code>no</code>, <code>off</code> <pre><code>export TRINO_SSL=true\nexport MCP_TRINO_EXT_READONLY=1\nexport MCP_TRINO_EXT_LOGGING=yes\n</code></pre>"},{"location":"reference/configuration/#duration-values","title":"Duration Values","text":"<p>Duration values in YAML accept:</p> Format Example Seconds <code>120s</code> Minutes <code>2m</code> Hours <code>1h</code> Combined <code>1h30m</code> <pre><code>trino:\n  timeout: 2m\ntoolkit:\n  default_timeout: 60s\n  max_timeout: 5m\n</code></pre>"},{"location":"reference/configuration/#port-defaults","title":"Port Defaults","text":"<p>The default port depends on SSL setting:</p> SSL Default Port <code>true</code> 443 <code>false</code> 8080"},{"location":"reference/configuration/#ssl-auto-detection","title":"SSL Auto-Detection","text":"<p>SSL is automatically enabled for remote hosts:</p> Host Default SSL <code>localhost</code> <code>false</code> <code>127.0.0.1</code> <code>false</code> Any other <code>true</code> <p>Override with explicit <code>TRINO_SSL</code> setting.</p>"},{"location":"reference/configuration/#toolkit-configuration-go-library","title":"Toolkit Configuration (Go Library)","text":"<p>When using as a library, configure programmatically:</p> <pre><code>cfg := tools.Config{\n    DefaultLimit:   1000,\n    MaxLimit:       10000,\n    DefaultTimeout: 120 * time.Second,\n    MaxTimeout:     300 * time.Second,\n}\n\ntoolkit := tools.NewToolkit(trinoClient, cfg)\n</code></pre> Field Type Default Description <code>DefaultLimit</code> int 1000 Default row limit <code>MaxLimit</code> int 10000 Maximum row limit <code>DefaultTimeout</code> Duration 120s Default query timeout <code>MaxTimeout</code> Duration 300s Maximum query timeout"},{"location":"reference/configuration/#client-configuration-go-library","title":"Client Configuration (Go Library)","text":"<pre><code>cfg := client.Config{\n    Host:      \"trino.example.com\",\n    Port:      443,\n    User:      \"analyst\",\n    Password:  \"secret\",\n    Catalog:   \"hive\",\n    Schema:    \"default\",\n    SSL:       true,\n    SSLVerify: true,\n    Timeout:   120 * time.Second,\n    Source:    \"my-app\",\n}\n\ntrinoClient, err := client.New(cfg)\n</code></pre> <p>Or from environment:</p> <pre><code>cfg := client.FromEnv()\ntrinoClient, err := client.New(cfg)\n</code></pre>"},{"location":"reference/configuration/#validation","title":"Validation","text":"<p>Configuration is validated on startup:</p> Check Error Missing <code>TRINO_USER</code> <code>user is required</code> Invalid port <code>port must be between 1 and 65535</code> Invalid timeout <code>timeout must be positive</code> Invalid JSON in <code>TRINO_ADDITIONAL_SERVERS</code> <code>failed to parse additional servers</code> Unknown connection name <code>connection 'name' not found</code>"},{"location":"reference/security/","title":"Security Reference","text":"<p>Security features, verification methods, and best practices for mcp-trino.</p>"},{"location":"reference/security/#secure-defaults","title":"Secure Defaults","text":"<p>mcp-trino ships with secure defaults that protect against common issues:</p> Default Value Protection Read-only mode Enabled Blocks INSERT, UPDATE, DELETE Row limit 1000 Prevents excessive data retrieval Query timeout 120s Prevents runaway queries SSL Enabled Encrypts data in transit SSL verify Enabled Validates server certificates"},{"location":"reference/security/#read-only-mode","title":"Read-Only Mode","text":"<p>Read-only mode blocks write operations at the MCP server level, regardless of Trino permissions.</p>"},{"location":"reference/security/#blocked-statements","title":"Blocked Statements","text":"<ul> <li><code>INSERT</code></li> <li><code>UPDATE</code></li> <li><code>DELETE</code></li> <li><code>DROP</code></li> <li><code>CREATE</code></li> <li><code>ALTER</code></li> <li><code>TRUNCATE</code></li> <li><code>MERGE</code></li> </ul>"},{"location":"reference/security/#configuration","title":"Configuration","text":"<p>Enabled by default. To disable:</p> <pre><code>export MCP_TRINO_EXT_READONLY=false\n</code></pre> <p>Or in YAML:</p> <pre><code>extensions:\n  readonly: false\n</code></pre>"},{"location":"reference/security/#when-to-disable","title":"When to Disable","text":"<p>Only disable read-only mode when:</p> <ul> <li>Users need to create/modify data</li> <li>Trino permissions are properly configured</li> <li>Audit logging is enabled</li> </ul>"},{"location":"reference/security/#query-limits","title":"Query Limits","text":""},{"location":"reference/security/#row-limits","title":"Row Limits","text":"Parameter Default Maximum <code>limit</code> 1000 10000 <p>The row limit:</p> <ul> <li>Prevents accidentally retrieving millions of rows</li> <li>Can be overridden per-query up to maximum</li> <li>Returns <code>truncated: true</code> if more rows exist</li> </ul>"},{"location":"reference/security/#timeout-limits","title":"Timeout Limits","text":"Parameter Default Maximum <code>timeout_seconds</code> 120 300 <p>The timeout:</p> <ul> <li>Cancels queries that run too long</li> <li>Prevents resource exhaustion</li> <li>Returns error on timeout</li> </ul>"},{"location":"reference/security/#customizing-limits","title":"Customizing Limits","text":"<pre><code>cfg := tools.Config{\n    DefaultLimit:   500,    // Lower default\n    MaxLimit:       5000,   // Lower maximum\n    DefaultTimeout: 60 * time.Second,\n    MaxTimeout:     180 * time.Second,\n}\n</code></pre>"},{"location":"reference/security/#ssltls","title":"SSL/TLS","text":""},{"location":"reference/security/#default-behavior","title":"Default Behavior","text":"Host SSL SSL Verify <code>localhost</code> Off - <code>127.0.0.1</code> Off - Remote On On"},{"location":"reference/security/#configuration_1","title":"Configuration","text":"<pre><code># Force SSL\nexport TRINO_SSL=true\nexport TRINO_SSL_VERIFY=true\n\n# Disable SSL (not recommended)\nexport TRINO_SSL=false\n</code></pre>"},{"location":"reference/security/#certificate-verification","title":"Certificate Verification","text":"<p>When <code>TRINO_SSL_VERIFY=true</code>:</p> <ul> <li>Server certificate must be valid</li> <li>Certificate chain must be trusted</li> <li>Hostname must match certificate</li> </ul> <p>To disable verification (testing only):</p> <pre><code>export TRINO_SSL_VERIFY=false\n</code></pre> <p>\u26a0\ufe0f Never disable SSL verification in production.</p>"},{"location":"reference/security/#authentication","title":"Authentication","text":""},{"location":"reference/security/#basic-authentication","title":"Basic Authentication","text":"<pre><code>export TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\n</code></pre> <p>The password is sent via HTTP Basic Auth over SSL.</p>"},{"location":"reference/security/#custom-authentication-library","title":"Custom Authentication (Library)","text":"<p>For OAuth, API keys, or SSO, use middleware:</p> <pre><code>type OAuthMiddleware struct {\n    config OAuthConfig\n}\n\nfunc (m *OAuthMiddleware) Before(ctx *ToolContext) error {\n    token, err := m.getAccessToken(ctx)\n    if err != nil {\n        return fmt.Errorf(\"authentication failed: %w\", err)\n    }\n    ctx.Set(\"access_token\", token)\n    return nil\n}\n</code></pre>"},{"location":"reference/security/#release-verification","title":"Release Verification","text":"<p>All releases are signed and include provenance attestations.</p>"},{"location":"reference/security/#checksum-verification","title":"Checksum Verification","text":"<p>Each release includes a <code>checksums.txt</code> file:</p> <pre><code># Download\ncurl -LO https://github.com/txn2/mcp-trino/releases/latest/download/mcp-trino_Linux_x86_64.tar.gz\ncurl -LO https://github.com/txn2/mcp-trino/releases/latest/download/checksums.txt\n\n# Verify\nsha256sum --check checksums.txt\n</code></pre>"},{"location":"reference/security/#cosign-signature-verification","title":"Cosign Signature Verification","text":"<p>Releases are signed with Cosign keyless signatures:</p> <pre><code># Install cosign\nbrew install cosign\n\n# Download signature bundle\ncurl -LO https://github.com/txn2/mcp-trino/releases/latest/download/mcp-trino_Linux_x86_64.tar.gz.sigstore.json\n\n# Verify\ncosign verify-blob \\\n  --bundle mcp-trino_Linux_x86_64.tar.gz.sigstore.json \\\n  --certificate-identity-regexp=\"https://github.com/txn2/mcp-trino\" \\\n  --certificate-oidc-issuer=\"https://token.actions.githubusercontent.com\" \\\n  mcp-trino_Linux_x86_64.tar.gz\n</code></pre>"},{"location":"reference/security/#slsa-provenance","title":"SLSA Provenance","text":"<p>All releases include SLSA Level 3 provenance attestations:</p> <pre><code># Download provenance\ncurl -LO https://github.com/txn2/mcp-trino/releases/latest/download/mcp-trino_Linux_x86_64.tar.gz.intoto.jsonl\n\n# Verify with slsa-verifier\nslsa-verifier verify-artifact \\\n  --provenance-path mcp-trino_Linux_x86_64.tar.gz.intoto.jsonl \\\n  --source-uri github.com/txn2/mcp-trino \\\n  mcp-trino_Linux_x86_64.tar.gz\n</code></pre> <p>SLSA Level 3 guarantees:</p> <ul> <li>Build process is tamper-resistant</li> <li>Provenance is non-falsifiable</li> <li>Source is version-controlled</li> </ul>"},{"location":"reference/security/#best-practices","title":"Best Practices","text":""},{"location":"reference/security/#production-checklist","title":"Production Checklist","text":"<ul> <li> Enable read-only mode</li> <li> Configure appropriate row limits</li> <li> Enable SSL with verification</li> <li> Use separate credentials per environment</li> <li> Enable audit logging</li> <li> Verify binary signatures before deployment</li> </ul>"},{"location":"reference/security/#credential-management","title":"Credential Management","text":"<p>Do:</p> <ul> <li>Store credentials in environment variables</li> <li>Use secrets management (Vault, K8s Secrets)</li> <li>Use separate credentials per environment</li> <li>Rotate credentials regularly</li> </ul> <p>Don't:</p> <ul> <li>Hardcode credentials in code</li> <li>Commit credentials to version control</li> <li>Share credentials between environments</li> <li>Use production credentials for development</li> </ul>"},{"location":"reference/security/#network-security","title":"Network Security","text":"<p>Do:</p> <ul> <li>Enable SSL/TLS</li> <li>Use private networks between MCP server and Trino</li> <li>Configure firewalls to limit access</li> <li>Use VPN for remote connections</li> </ul> <p>Don't:</p> <ul> <li>Expose Trino directly to the internet</li> <li>Disable SSL verification</li> <li>Use unencrypted connections</li> </ul>"},{"location":"reference/security/#audit-logging","title":"Audit Logging","text":"<p>Enable audit logging for compliance:</p> <pre><code>export MCP_TRINO_EXT_LOGGING=true\nexport MCP_TRINO_EXT_QUERYLOG=true\n</code></pre> <p>Or use custom audit interceptor:</p> <pre><code>toolkit.AddInterceptor(&amp;AuditLogInterceptor{\n    output: auditFile,\n    fields: []string{\"user\", \"query\", \"timestamp\"},\n})\n</code></pre>"},{"location":"reference/security/#threat-model","title":"Threat Model","text":""},{"location":"reference/security/#what-mcp-trino-protects-against","title":"What mcp-trino Protects Against","text":"Threat Protection Accidental data modification Read-only mode Excessive data retrieval Row limits Resource exhaustion Query timeouts Man-in-the-middle SSL/TLS Tampered binaries Cosign signatures Supply chain attacks SLSA provenance"},{"location":"reference/security/#what-requires-additional-protection","title":"What Requires Additional Protection","text":"Threat Required Measure Unauthorized access Trino authentication + custom middleware SQL injection Parameterized queries in application Data exfiltration Trino column masking + data governance Privilege escalation Trino role-based access control"},{"location":"reference/security/#compliance","title":"Compliance","text":""},{"location":"reference/security/#soc-2","title":"SOC 2","text":"<p>For SOC 2 compliance:</p> <ul> <li>Enable audit logging (<code>MCP_TRINO_EXT_LOGGING=true</code>)</li> <li>Enable query logging (<code>MCP_TRINO_EXT_QUERYLOG=true</code>)</li> <li>Implement access controls via middleware</li> <li>Retain logs per retention policy</li> </ul>"},{"location":"reference/security/#hipaa","title":"HIPAA","text":"<p>For HIPAA compliance:</p> <ul> <li>Enable SSL with verification</li> <li>Implement data redaction transformer</li> <li>Configure audit logging</li> <li>Ensure proper access controls in Trino</li> </ul>"},{"location":"reference/security/#gdpr","title":"GDPR","text":"<p>For GDPR compliance:</p> <ul> <li>Implement data redaction for PII</li> <li>Configure tenant isolation</li> <li>Enable audit logging</li> <li>Ensure data residency requirements</li> </ul>"},{"location":"reference/tools-api/","title":"Tools API Reference","text":"<p>Complete parameter and response specifications for all mcp-trino tools.</p>"},{"location":"reference/tools-api/#trino_query","title":"trino_query","text":"<p>Execute SQL queries against Trino.</p>"},{"location":"reference/tools-api/#parameters","title":"Parameters","text":"Parameter Type Required Default Constraints Description <code>sql</code> string Yes - Non-empty SQL query to execute <code>limit</code> integer No 1000 1-10000 Maximum rows to return <code>format</code> string No <code>json</code> <code>json</code>, <code>csv</code>, <code>markdown</code> Output format <code>timeout_seconds</code> integer No 120 1-300 Query timeout <code>connection</code> string No <code>default</code> Valid connection name Server connection"},{"location":"reference/tools-api/#response","title":"Response","text":"<p>JSON Format:</p> <pre><code>{\n  \"columns\": [\"id\", \"name\", \"created_at\"],\n  \"rows\": [\n    [1, \"Alice\", \"2024-01-15T10:00:00Z\"],\n    [2, \"Bob\", \"2024-01-15T11:00:00Z\"]\n  ],\n  \"row_count\": 2,\n  \"truncated\": false\n}\n</code></pre> <p>CSV Format:</p> <pre><code>id,name,created_at\n1,Alice,2024-01-15T10:00:00Z\n2,Bob,2024-01-15T11:00:00Z\n</code></pre> <p>Markdown Format:</p> <pre><code>| id | name | created_at |\n|----|------|------------|\n| 1 | Alice | 2024-01-15T10:00:00Z |\n| 2 | Bob | 2024-01-15T11:00:00Z |\n</code></pre>"},{"location":"reference/tools-api/#errors","title":"Errors","text":"Code Message Cause <code>INVALID_SQL</code> SQL query is required Empty <code>sql</code> parameter <code>LIMIT_EXCEEDED</code> Limit exceeds maximum <code>limit</code> &gt; 10000 <code>TIMEOUT_EXCEEDED</code> Timeout exceeds maximum <code>timeout_seconds</code> &gt; 300 <code>QUERY_ERROR</code> Query execution failed Trino error <code>READ_ONLY</code> Write operation blocked INSERT/UPDATE/DELETE in read-only mode"},{"location":"reference/tools-api/#trino_explain","title":"trino_explain","text":"<p>Get query execution plan without running the query.</p>"},{"location":"reference/tools-api/#parameters_1","title":"Parameters","text":"Parameter Type Required Default Constraints Description <code>sql</code> string Yes - Non-empty SQL query to explain <code>type</code> string No <code>LOGICAL</code> See below Explain type <code>connection</code> string No <code>default</code> Valid connection name Server connection"},{"location":"reference/tools-api/#explain-types","title":"Explain Types","text":"Type Description Use Case <code>LOGICAL</code> Logical query plan Understand query structure <code>DISTRIBUTED</code> Physical execution plan See worker distribution <code>IO</code> I/O statistics estimate Estimate data scanned <code>VALIDATE</code> Syntax validation only Check without planning"},{"location":"reference/tools-api/#response_1","title":"Response","text":"<pre><code>{\n  \"type\": \"LOGICAL\",\n  \"plan\": \"- Output[columnNames = [id, name]] =&gt; [[id, name]]\\n    - TableScan[table = hive:default:users] =&gt; [[id, name]]\"\n}\n</code></pre>"},{"location":"reference/tools-api/#errors_1","title":"Errors","text":"Code Message Cause <code>INVALID_SQL</code> SQL query is required Empty <code>sql</code> parameter <code>INVALID_TYPE</code> Invalid explain type Unknown type value <code>PLAN_ERROR</code> Failed to generate plan Invalid SQL syntax"},{"location":"reference/tools-api/#trino_list_catalogs","title":"trino_list_catalogs","text":"<p>List all available data catalogs.</p>"},{"location":"reference/tools-api/#parameters_2","title":"Parameters","text":"Parameter Type Required Default Description <code>connection</code> string No <code>default</code> Server connection"},{"location":"reference/tools-api/#response_2","title":"Response","text":"<pre><code>{\n  \"catalogs\": [\"hive\", \"iceberg\", \"memory\", \"system\"]\n}\n</code></pre>"},{"location":"reference/tools-api/#trino_list_schemas","title":"trino_list_schemas","text":"<p>List schemas within a catalog.</p>"},{"location":"reference/tools-api/#parameters_3","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>connection</code> string No <code>default</code> Server connection"},{"location":"reference/tools-api/#response_3","title":"Response","text":"<pre><code>{\n  \"catalog\": \"hive\",\n  \"schemas\": [\"default\", \"sales\", \"marketing\", \"analytics\"]\n}\n</code></pre>"},{"location":"reference/tools-api/#errors_2","title":"Errors","text":"Code Message Cause <code>CATALOG_REQUIRED</code> Catalog is required Empty <code>catalog</code> <code>CATALOG_NOT_FOUND</code> Catalog not found Invalid catalog name"},{"location":"reference/tools-api/#trino_list_tables","title":"trino_list_tables","text":"<p>List tables in a schema with optional filtering.</p>"},{"location":"reference/tools-api/#parameters_4","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>schema</code> string Yes - Schema name <code>pattern</code> string No - LIKE pattern filter <code>connection</code> string No <code>default</code> Server connection"},{"location":"reference/tools-api/#pattern-syntax","title":"Pattern Syntax","text":"Pattern Matches <code>order%</code> Tables starting with \"order\" <code>%log</code> Tables ending with \"log\" <code>%event%</code> Tables containing \"event\" <code>user_</code> Tables like \"user_1\", \"user_a\""},{"location":"reference/tools-api/#response_4","title":"Response","text":"<pre><code>{\n  \"catalog\": \"hive\",\n  \"schema\": \"sales\",\n  \"tables\": [\"customers\", \"orders\", \"order_items\"],\n  \"pattern\": null\n}\n</code></pre>"},{"location":"reference/tools-api/#errors_3","title":"Errors","text":"Code Message Cause <code>CATALOG_REQUIRED</code> Catalog is required Empty <code>catalog</code> <code>SCHEMA_REQUIRED</code> Schema is required Empty <code>schema</code> <code>SCHEMA_NOT_FOUND</code> Schema not found Invalid schema name"},{"location":"reference/tools-api/#trino_describe_table","title":"trino_describe_table","text":"<p>Get table structure and optional sample data.</p>"},{"location":"reference/tools-api/#parameters_5","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>schema</code> string Yes - Schema name <code>table</code> string Yes - Table name <code>include_sample</code> boolean No <code>true</code> Include sample rows <code>connection</code> string No <code>default</code> Server connection"},{"location":"reference/tools-api/#response_5","title":"Response","text":"<pre><code>{\n  \"table\": \"hive.sales.customers\",\n  \"columns\": [\n    {\n      \"name\": \"id\",\n      \"type\": \"bigint\",\n      \"nullable\": false,\n      \"comment\": \"Primary key\"\n    },\n    {\n      \"name\": \"name\",\n      \"type\": \"varchar(255)\",\n      \"nullable\": true,\n      \"comment\": null\n    },\n    {\n      \"name\": \"email\",\n      \"type\": \"varchar(255)\",\n      \"nullable\": true,\n      \"comment\": \"Contact email\"\n    }\n  ],\n  \"sample\": [\n    [1, \"Alice Smith\", \"alice@example.com\"],\n    [2, \"Bob Jones\", \"bob@example.com\"]\n  ],\n  \"sample_count\": 2\n}\n</code></pre>"},{"location":"reference/tools-api/#errors_4","title":"Errors","text":"Code Message Cause <code>CATALOG_REQUIRED</code> Catalog is required Empty <code>catalog</code> <code>SCHEMA_REQUIRED</code> Schema is required Empty <code>schema</code> <code>TABLE_REQUIRED</code> Table is required Empty <code>table</code> <code>TABLE_NOT_FOUND</code> Table not found Invalid table name"},{"location":"reference/tools-api/#trino_list_connections","title":"trino_list_connections","text":"<p>List all configured server connections.</p>"},{"location":"reference/tools-api/#parameters_6","title":"Parameters","text":"<p>None.</p>"},{"location":"reference/tools-api/#response_6","title":"Response","text":"<pre><code>{\n  \"connections\": [\n    {\n      \"name\": \"default\",\n      \"host\": \"prod.trino.example.com\",\n      \"port\": 443,\n      \"catalog\": \"hive\",\n      \"ssl\": true\n    },\n    {\n      \"name\": \"staging\",\n      \"host\": \"staging.trino.example.com\",\n      \"port\": 443,\n      \"catalog\": \"hive\",\n      \"ssl\": true\n    },\n    {\n      \"name\": \"dev\",\n      \"host\": \"localhost\",\n      \"port\": 8080,\n      \"catalog\": \"memory\",\n      \"ssl\": false\n    }\n  ],\n  \"default\": \"default\"\n}\n</code></pre>"},{"location":"reference/tools-api/#common-parameters","title":"Common Parameters","text":""},{"location":"reference/tools-api/#connection","title":"connection","text":"<p>All tools accept an optional <code>connection</code> parameter to specify which Trino server to use:</p> <pre><code>{\n  \"tool\": \"trino_query\",\n  \"arguments\": {\n    \"sql\": \"SELECT * FROM users\",\n    \"connection\": \"staging\"\n  }\n}\n</code></pre> <p>If not specified, the default connection is used.</p>"},{"location":"reference/tools-api/#error-response-format","title":"Error Response Format","text":"<p>All errors follow this format:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable error message\",\n    \"details\": {\n      \"sql\": \"SELECT * FROM nonexistent\",\n      \"trino_error_code\": 1\n    }\n  }\n}\n</code></pre>"},{"location":"reference/tools-api/#rate-limits","title":"Rate Limits","text":"<p>The toolkit enforces these default limits:</p> Limit Default Maximum Environment Variable Rows per query 1000 10000 - Query timeout 120s 300s <code>TRINO_TIMEOUT</code> <p>Override in toolkit configuration:</p> <pre><code>cfg := tools.Config{\n    DefaultLimit:   500,\n    MaxLimit:       5000,\n    DefaultTimeout: 60 * time.Second,\n    MaxTimeout:     180 * time.Second,\n}\n</code></pre>"},{"location":"server/","title":"MCP Server","text":"<p>The mcp-trino server enables AI assistants to query Trino data warehouses through the Model Context Protocol (MCP).</p>"},{"location":"server/#what-it-does","title":"What It Does","text":"<p>When connected to your AI assistant, the server provides tools for:</p> <ul> <li>SQL Execution - Run queries with automatic limits and timeouts</li> <li>Query Analysis - Explain execution plans before running expensive queries</li> <li>Schema Exploration - Browse catalogs, schemas, tables, and columns</li> <li>Multi-Cluster - Query multiple Trino clusters from one installation</li> </ul>"},{"location":"server/#supported-ai-clients","title":"Supported AI Clients","text":"Client Platform Install Method Claude Desktop macOS, Windows <code>.mcpb</code> bundle Claude Code CLI <code>claude mcp add</code> Cursor macOS, Windows, Linux Manual config Windsurf macOS, Windows, Linux Manual config Any MCP Client Any stdio transport"},{"location":"server/#quick-demo","title":"Quick Demo","text":"<p>Once installed, ask your AI assistant:</p> <p>\"What tables are in the sales schema?\"</p> <p>The assistant uses <code>trino_list_tables</code> to show available tables.</p> <p>\"Show me the top 10 customers by order value\"</p> <p>The assistant generates SQL and uses <code>trino_query</code> to execute it.</p> <p>\"Why is my orders query slow?\"</p> <p>The assistant uses <code>trino_explain</code> to analyze the execution plan.</p>"},{"location":"server/#features","title":"Features","text":""},{"location":"server/#secure-defaults","title":"Secure Defaults","text":"<ul> <li>Read-only mode enabled by default (blocks INSERT, UPDATE, DELETE)</li> <li>Row limits prevent excessive data retrieval (default: 1000, max: 10000)</li> <li>Query timeouts prevent runaway queries (default: 120s)</li> </ul>"},{"location":"server/#production-ready","title":"Production Ready","text":"<ul> <li>File-based configuration for Kubernetes ConfigMaps</li> <li>Environment variable expansion for secrets</li> <li>Multi-server support for environment separation</li> </ul>"},{"location":"server/#enterprise-security","title":"Enterprise Security","text":"<ul> <li>SLSA Level 3 provenance on all releases</li> <li>Cosign keyless signatures for verification</li> <li>Checksum verification</li> </ul>"},{"location":"server/#next-steps","title":"Next Steps","text":"<ul> <li>Installation - Install the server</li> <li>Configuration - Configure connection and extensions</li> <li>Tools - Learn about available tools</li> <li>Multi-Server - Connect multiple clusters</li> </ul>"},{"location":"server/configuration/","title":"Configuration","text":"<p>Configure the mcp-trino server using environment variables or configuration files.</p>"},{"location":"server/configuration/#connection-settings","title":"Connection Settings","text":"Variable Description Default <code>TRINO_HOST</code> Trino server hostname <code>localhost</code> <code>TRINO_PORT</code> Server port <code>443</code> (SSL) / <code>8080</code> <code>TRINO_USER</code> Authentication username (required) <code>TRINO_PASSWORD</code> Authentication password (optional) <code>TRINO_CATALOG</code> Default catalog <code>memory</code> <code>TRINO_SCHEMA</code> Default schema <code>default</code> <code>TRINO_SSL</code> Enable HTTPS <code>true</code> for remote hosts <code>TRINO_SSL_VERIFY</code> Verify SSL certificates <code>true</code> <code>TRINO_TIMEOUT</code> Query timeout (seconds) <code>120</code> <code>TRINO_SOURCE</code> Client identifier <code>mcp-trino</code>"},{"location":"server/configuration/#example-remote-server","title":"Example: Remote Server","text":"<pre><code>export TRINO_HOST=trino.example.com\nexport TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\nexport TRINO_CATALOG=hive\nexport TRINO_SCHEMA=default\n</code></pre>"},{"location":"server/configuration/#example-local-development","title":"Example: Local Development","text":"<pre><code>export TRINO_HOST=localhost\nexport TRINO_PORT=8080\nexport TRINO_USER=admin\nexport TRINO_SSL=false\nexport TRINO_CATALOG=memory\n</code></pre>"},{"location":"server/configuration/#extensions","title":"Extensions","text":"Variable Description Default <code>MCP_TRINO_EXT_READONLY</code> Block write operations <code>true</code> <code>MCP_TRINO_EXT_ERRORS</code> Add helpful hints to errors <code>true</code> <code>MCP_TRINO_EXT_LOGGING</code> Enable request logging <code>false</code> <code>MCP_TRINO_EXT_METRICS</code> Enable metrics collection <code>false</code> <code>MCP_TRINO_EXT_QUERYLOG</code> Log all SQL queries <code>false</code> <code>MCP_TRINO_EXT_METADATA</code> Add execution stats to results <code>false</code>"},{"location":"server/configuration/#read-only-mode","title":"Read-Only Mode","text":"<p>Enabled by default. Blocks these statements:</p> <ul> <li>INSERT, UPDATE, DELETE</li> <li>DROP, CREATE, ALTER</li> <li>TRUNCATE, MERGE</li> </ul> <p>To allow write operations:</p> <pre><code>export MCP_TRINO_EXT_READONLY=false\n</code></pre> <p>Warning</p> <p>Only disable read-only mode when necessary and with appropriate Trino permissions.</p>"},{"location":"server/configuration/#logging","title":"Logging","text":"<p>Enable structured JSON logging:</p> <pre><code>export MCP_TRINO_EXT_LOGGING=true\n</code></pre> <p>Output: <pre><code>{\"event\":\"request_start\",\"tool\":\"trino_query\",\"request_id\":\"abc123\"}\n{\"event\":\"request_success\",\"tool\":\"trino_query\",\"duration_ms\":150}\n</code></pre></p>"},{"location":"server/configuration/#file-based-configuration","title":"File-Based Configuration","text":"<p>For production deployments, use a YAML configuration file:</p> <pre><code># /etc/mcp-trino/config.yaml\ntrino:\n  host: trino.example.com\n  port: 443\n  user: ${TRINO_USER}           # Environment variable expansion\n  password: ${TRINO_PASSWORD}\n  catalog: hive\n  schema: default\n  ssl: true\n  ssl_verify: true\n  timeout: 120s\n\ntoolkit:\n  default_limit: 1000\n  max_limit: 10000\n  default_timeout: 120s\n  max_timeout: 300s\n\nextensions:\n  readonly: true\n  logging: true\n  metrics: false\n  errors: true\n</code></pre> <p>Load with:</p> <pre><code>export MCP_TRINO_CONFIG=/etc/mcp-trino/config.yaml\nexport TRINO_USER=service_account\nexport TRINO_PASSWORD=secret\nmcp-trino\n</code></pre>"},{"location":"server/configuration/#configuration-precedence","title":"Configuration Precedence","text":"<ol> <li>Environment variables (highest priority)</li> <li>Configuration file</li> <li>Defaults (lowest priority)</li> </ol> <p>This allows base settings in a config file with secrets from environment variables.</p>"},{"location":"server/configuration/#docker-configuration","title":"Docker Configuration","text":""},{"location":"server/configuration/#environment-variables","title":"Environment Variables","text":"<pre><code>docker run --rm -i \\\n  -e TRINO_HOST=trino.example.com \\\n  -e TRINO_USER=analyst \\\n  -e TRINO_PASSWORD=secret \\\n  -e MCP_TRINO_EXT_LOGGING=true \\\n  ghcr.io/txn2/mcp-trino:latest\n</code></pre>"},{"location":"server/configuration/#config-file-mount","title":"Config File Mount","text":"<pre><code>docker run --rm -i \\\n  -v /path/to/config.yaml:/etc/mcp-trino/config.yaml \\\n  -e MCP_TRINO_CONFIG=/etc/mcp-trino/config.yaml \\\n  -e TRINO_PASSWORD=secret \\\n  ghcr.io/txn2/mcp-trino:latest\n</code></pre>"},{"location":"server/configuration/#kubernetes","title":"Kubernetes","text":""},{"location":"server/configuration/#configmap","title":"ConfigMap","text":"<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: mcp-trino-config\ndata:\n  config.yaml: |\n    trino:\n      host: trino.prod.svc.cluster.local\n      port: 8080\n      user: ${TRINO_USER}\n      password: ${TRINO_PASSWORD}\n      catalog: hive\n      ssl: false\n    extensions:\n      readonly: true\n      logging: true\n</code></pre>"},{"location":"server/configuration/#secret","title":"Secret","text":"<pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: trino-credentials\ntype: Opaque\nstringData:\n  username: service_account\n  password: your-secret-password\n</code></pre>"},{"location":"server/configuration/#deployment","title":"Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mcp-trino\nspec:\n  template:\n    spec:\n      containers:\n      - name: mcp-trino\n        image: ghcr.io/txn2/mcp-trino:latest\n        env:\n        - name: MCP_TRINO_CONFIG\n          value: /etc/mcp-trino/config.yaml\n        - name: TRINO_USER\n          valueFrom:\n            secretKeyRef:\n              name: trino-credentials\n              key: username\n        - name: TRINO_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: trino-credentials\n              key: password\n        volumeMounts:\n        - name: config\n          mountPath: /etc/mcp-trino\n      volumes:\n      - name: config\n        configMap:\n          name: mcp-trino-config\n</code></pre>"},{"location":"server/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Tools - Learn about available tools</li> <li>Multi-Server - Connect multiple Trino clusters</li> <li>Security Reference - Security best practices</li> </ul>"},{"location":"server/installation/","title":"Installation","text":"<p>Install the mcp-trino server for your platform and AI client.</p>"},{"location":"server/installation/#homebrew-macos","title":"Homebrew (macOS)","text":"<p>The easiest way to install on macOS:</p> <pre><code>brew install txn2/tap/mcp-trino\n</code></pre>"},{"location":"server/installation/#claude-desktop","title":"Claude Desktop","text":"<p>Claude Desktop is the GUI application for chatting with Claude.</p>"},{"location":"server/installation/#option-1-one-click-install-recommended","title":"Option 1: One-Click Install (Recommended)","text":"<p>Download the <code>.mcpb</code> bundle for your Mac from the releases page:</p> Mac Type Chip Download MacBook Air/Pro (2020+), Mac Mini (2020+), iMac (2021+), Mac Studio Apple M1/M2/M3/M4 (arm64) <code>mcp-trino_*_darwin_arm64.mcpb</code> MacBook Air/Pro (pre-2020), Mac Mini (pre-2020), iMac (pre-2021) Intel (amd64) <code>mcp-trino_*_darwin_amd64.mcpb</code> <p>Double-click the <code>.mcpb</code> file to install. Configure your Trino connection in Claude Desktop settings.</p> <p>Which chip do I have?</p> <p>Click  \u2192 \"About This Mac\". Look for \"Chip\" (Apple Silicon) or \"Processor\" (Intel).</p>"},{"location":"server/installation/#option-2-manual-configuration","title":"Option 2: Manual Configuration","text":"<p>Add to your <code>claude_desktop_config.json</code> (Claude Desktop \u2192 Settings \u2192 Developer):</p> <pre><code>{\n  \"mcpServers\": {\n    \"trino\": {\n      \"command\": \"/opt/homebrew/bin/mcp-trino\",\n      \"env\": {\n        \"TRINO_HOST\": \"trino.example.com\",\n        \"TRINO_USER\": \"your_user\",\n        \"TRINO_PASSWORD\": \"your_password\",\n        \"TRINO_CATALOG\": \"hive\",\n        \"TRINO_SCHEMA\": \"default\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"server/installation/#claude-code-cli","title":"Claude Code CLI","text":"<p>Claude Code is the terminal-based coding assistant.</p> <pre><code># If installed via Homebrew\nclaude mcp add trino \\\n  -e TRINO_HOST=trino.example.com \\\n  -e TRINO_USER=your_user \\\n  -e TRINO_PASSWORD=your_password \\\n  -e TRINO_CATALOG=hive \\\n  -- mcp-trino\n</code></pre> <p>Or with a downloaded binary:</p> <pre><code># Download\ncurl -L https://github.com/txn2/mcp-trino/releases/latest/download/mcp-trino_$(uname -s)_$(uname -m).tar.gz | tar xz\n\n# Add to Claude Code\nclaude mcp add trino \\\n  -e TRINO_HOST=trino.example.com \\\n  -e TRINO_USER=your_user \\\n  -- ./mcp-trino\n</code></pre>"},{"location":"server/installation/#docker","title":"Docker","text":"<pre><code>docker run --rm -i \\\n  -e TRINO_HOST=trino.example.com \\\n  -e TRINO_USER=your_user \\\n  -e TRINO_PASSWORD=your_password \\\n  ghcr.io/txn2/mcp-trino:latest\n</code></pre> <p>For MCP clients that support Docker:</p> <pre><code>{\n  \"mcpServers\": {\n    \"trino\": {\n      \"command\": \"docker\",\n      \"args\": [\"run\", \"--rm\", \"-i\",\n        \"-e\", \"TRINO_HOST=trino.example.com\",\n        \"-e\", \"TRINO_USER=your_user\",\n        \"ghcr.io/txn2/mcp-trino:latest\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"server/installation/#go-install","title":"Go Install","text":"<p>If you have Go installed:</p> <pre><code>go install github.com/txn2/mcp-trino/cmd/mcp-trino@latest\n</code></pre>"},{"location":"server/installation/#binary-download","title":"Binary Download","text":"<p>Download pre-built binaries from the releases page:</p> <pre><code># Linux/macOS\ncurl -LO https://github.com/txn2/mcp-trino/releases/latest/download/mcp-trino_Linux_x86_64.tar.gz\ntar xzf mcp-trino_Linux_x86_64.tar.gz\nchmod +x mcp-trino\nsudo mv mcp-trino /usr/local/bin/\n</code></pre>"},{"location":"server/installation/#verify-download","title":"Verify Download","text":"<p>All releases are signed. Verify with Cosign:</p> <pre><code>cosign verify-blob \\\n  --bundle mcp-trino_*.tar.gz.sigstore.json \\\n  mcp-trino_*.tar.gz\n</code></pre>"},{"location":"server/installation/#local-testing","title":"Local Testing","text":"<p>To test with a local Trino instance:</p> <pre><code># Start Trino in Docker\ndocker run -d -p 8080:8080 --name trino trinodb/trino\n\n# Configure for local connection\nexport TRINO_HOST=localhost\nexport TRINO_PORT=8080\nexport TRINO_USER=admin\nexport TRINO_SSL=false\nexport TRINO_CATALOG=memory\nexport TRINO_SCHEMA=default\n\n# Run the server\nmcp-trino\n</code></pre>"},{"location":"server/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - Configure your connection</li> <li>Tools - Learn about available tools</li> </ul>"},{"location":"server/multi-server/","title":"Multi-Server","text":"<p>Connect to multiple Trino clusters from a single mcp-trino installation.</p>"},{"location":"server/multi-server/#use-cases","title":"Use Cases","text":"<ul> <li>Environment Separation - Query production, staging, and development</li> <li>Data Federation - Access data across multiple clusters</li> <li>Disaster Recovery - Failover between primary and secondary</li> </ul>"},{"location":"server/multi-server/#configuration","title":"Configuration","text":""},{"location":"server/multi-server/#primary-server","title":"Primary Server","text":"<p>Configure with standard environment variables:</p> <pre><code>export TRINO_HOST=prod.trino.example.com\nexport TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\nexport TRINO_CATALOG=hive\n</code></pre>"},{"location":"server/multi-server/#additional-servers","title":"Additional Servers","text":"<p>Add more servers with <code>TRINO_ADDITIONAL_SERVERS</code>:</p> <pre><code>export TRINO_ADDITIONAL_SERVERS='{\n  \"staging\": {\n    \"host\": \"staging.trino.example.com\"\n  },\n  \"dev\": {\n    \"host\": \"localhost\",\n    \"port\": 8080,\n    \"ssl\": false\n  }\n}'\n</code></pre>"},{"location":"server/multi-server/#server-configuration-fields","title":"Server Configuration Fields","text":"Field Required Description <code>host</code> Yes Trino server hostname <code>port</code> No Server port (default: 443/8080) <code>user</code> No Username (inherits from primary) <code>password</code> No Password (inherits from primary) <code>catalog</code> No Default catalog <code>schema</code> No Default schema <code>ssl</code> No Enable HTTPS"},{"location":"server/multi-server/#credential-inheritance","title":"Credential Inheritance","text":"<p>Additional servers inherit credentials from the primary server unless overridden:</p> <pre><code># Primary credentials\nexport TRINO_USER=analyst\nexport TRINO_PASSWORD=secret\n\n# Staging inherits credentials\nexport TRINO_ADDITIONAL_SERVERS='{\n  \"staging\": {\n    \"host\": \"staging.trino.example.com\"\n  }\n}'\n</code></pre> <p>To use different credentials:</p> <pre><code>export TRINO_ADDITIONAL_SERVERS='{\n  \"dev\": {\n    \"host\": \"localhost\",\n    \"port\": 8080,\n    \"user\": \"admin\",\n    \"password\": \"\",\n    \"ssl\": false\n  }\n}'\n</code></pre>"},{"location":"server/multi-server/#usage","title":"Usage","text":""},{"location":"server/multi-server/#connection-parameter","title":"Connection Parameter","text":"<p>All tools accept an optional <code>connection</code> parameter:</p> <p>\"Query the staging server: SELECT COUNT(*) FROM users\"</p> <p>The AI assistant uses <code>connection: \"staging\"</code>.</p>"},{"location":"server/multi-server/#list-connections","title":"List Connections","text":"<p>Use <code>trino_list_connections</code> to see available servers:</p> <p>\"What Trino servers are configured?\"</p> <p>Response: <pre><code>{\n  \"connections\": [\n    {\"name\": \"default\", \"host\": \"prod.trino.example.com\"},\n    {\"name\": \"staging\", \"host\": \"staging.trino.example.com\"},\n    {\"name\": \"dev\", \"host\": \"localhost\"}\n  ],\n  \"default\": \"default\"\n}\n</code></pre></p>"},{"location":"server/multi-server/#natural-language-examples","title":"Natural Language Examples","text":"Prompt Connection Used \"Query the staging server\" <code>staging</code> \"Run this on dev\" <code>dev</code> \"Compare users between prod and staging\" Both connections \"Show me the schema\" <code>default</code> (primary)"},{"location":"server/multi-server/#architecture","title":"Architecture","text":"<pre><code>flowchart LR\n    subgraph MCP[\"mcp-trino\"]\n        M[\"Connection Manager\"]\n    end\n\n    M --&gt;|\"default\"| P[\"prod.trino.example.com\"]\n    M --&gt;|\"staging\"| S[\"staging.trino.example.com\"]\n    M --&gt;|\"dev\"| D[\"localhost:8080\"]</code></pre>"},{"location":"server/multi-server/#best-practices","title":"Best Practices","text":""},{"location":"server/multi-server/#naming","title":"Naming","text":"<p>Use clear, consistent names:</p> <pre><code># Good\n\"production\", \"staging\", \"development\"\n\"us-east\", \"us-west\", \"eu-central\"\n\n# Avoid\n\"server1\", \"server2\"\n\"trino-new\", \"trino-old\"\n</code></pre>"},{"location":"server/multi-server/#security","title":"Security","text":"<p>Use separate credentials per environment when possible:</p> <pre><code># config.yaml\nadditional_servers:\n  production:\n    host: prod.trino.example.com\n    user: ${PROD_TRINO_USER}\n    password: ${PROD_TRINO_PASSWORD}\n  staging:\n    host: staging.trino.example.com\n    user: ${STAGING_TRINO_USER}\n    password: ${STAGING_TRINO_PASSWORD}\n</code></pre>"},{"location":"server/multi-server/#default-connection","title":"Default Connection","text":"<p>Set the safest connection as default (usually development or read-only replica).</p>"},{"location":"server/multi-server/#error-handling","title":"Error Handling","text":""},{"location":"server/multi-server/#unknown-connection","title":"Unknown Connection","text":"<pre><code>Error: Connection 'invalid' not found\nAvailable: default, staging, dev\n</code></pre>"},{"location":"server/multi-server/#connection-failed","title":"Connection Failed","text":"<pre><code>Error: Failed to connect to 'staging': connection refused\nCheck that the server is running and accessible.\n</code></pre>"},{"location":"server/multi-server/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - All configuration options</li> <li>Security - Security considerations</li> </ul>"},{"location":"server/tools/","title":"Tools","text":"<p>The MCP server provides these tools for querying and exploring Trino.</p>"},{"location":"server/tools/#tool-summary","title":"Tool Summary","text":"Tool Description <code>trino_query</code> Execute SQL queries <code>trino_explain</code> Analyze execution plans <code>trino_list_catalogs</code> List available catalogs <code>trino_list_schemas</code> List schemas in a catalog <code>trino_list_tables</code> List tables in a schema <code>trino_describe_table</code> Get table columns and sample data <code>trino_list_connections</code> List configured server connections"},{"location":"server/tools/#trino_query","title":"trino_query","text":"<p>Execute SQL queries against Trino.</p>"},{"location":"server/tools/#parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>sql</code> string Yes - SQL query to execute <code>limit</code> integer No 1000 Max rows (1-10000) <code>format</code> string No <code>json</code> Output: <code>json</code>, <code>csv</code>, <code>markdown</code> <code>timeout_seconds</code> integer No 120 Timeout (1-300) <code>connection</code> string No default Server connection"},{"location":"server/tools/#examples","title":"Examples","text":"<p>\"Show me the first 10 customers\"</p> <pre><code>SELECT * FROM customers LIMIT 10\n</code></pre> <p>\"Count orders by status\"</p> <pre><code>SELECT status, COUNT(*) as count\nFROM orders\nGROUP BY status\n</code></pre> <p>\"Export users as CSV\"</p> <p>Uses <code>format: \"csv\"</code> parameter.</p>"},{"location":"server/tools/#trino_explain","title":"trino_explain","text":"<p>Analyze query execution plans without running the query.</p>"},{"location":"server/tools/#parameters_1","title":"Parameters","text":"Parameter Type Required Default Description <code>sql</code> string Yes - SQL query to explain <code>type</code> string No <code>LOGICAL</code> Plan type <code>connection</code> string No default Server connection"},{"location":"server/tools/#explain-types","title":"Explain Types","text":"Type Use Case <code>LOGICAL</code> Understand query structure <code>DISTRIBUTED</code> See execution stages across nodes <code>IO</code> Estimate data scanned <code>VALIDATE</code> Check syntax without planning"},{"location":"server/tools/#examples_1","title":"Examples","text":"<p>\"Why is this query slow?\"</p> <p>Uses <code>type: \"DISTRIBUTED\"</code> to see where time is spent.</p> <p>\"How much data will this read?\"</p> <p>Uses <code>type: \"IO\"</code> to see estimated bytes scanned.</p>"},{"location":"server/tools/#trino_list_catalogs","title":"trino_list_catalogs","text":"<p>List all available data catalogs.</p>"},{"location":"server/tools/#parameters_2","title":"Parameters","text":"Parameter Type Required Default Description <code>connection</code> string No default Server connection"},{"location":"server/tools/#example","title":"Example","text":"<p>\"What databases are available?\"</p> <p>Response: <pre><code>{\n  \"catalogs\": [\"hive\", \"iceberg\", \"memory\", \"system\"]\n}\n</code></pre></p>"},{"location":"server/tools/#trino_list_schemas","title":"trino_list_schemas","text":"<p>List schemas within a catalog.</p>"},{"location":"server/tools/#parameters_3","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>connection</code> string No default Server connection"},{"location":"server/tools/#example_1","title":"Example","text":"<p>\"Show me the schemas in hive\"</p> <p>Response: <pre><code>{\n  \"schemas\": [\"default\", \"sales\", \"marketing\", \"analytics\"]\n}\n</code></pre></p>"},{"location":"server/tools/#trino_list_tables","title":"trino_list_tables","text":"<p>List tables in a schema with optional pattern filtering.</p>"},{"location":"server/tools/#parameters_4","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>schema</code> string Yes - Schema name <code>pattern</code> string No - LIKE pattern <code>connection</code> string No default Server connection"},{"location":"server/tools/#pattern-syntax","title":"Pattern Syntax","text":"Pattern Matches <code>order%</code> Tables starting with \"order\" <code>%log</code> Tables ending with \"log\" <code>%event%</code> Tables containing \"event\""},{"location":"server/tools/#example_2","title":"Example","text":"<p>\"Show me tables related to orders\"</p> <p>Uses <code>pattern: \"%order%\"</code>: <pre><code>{\n  \"tables\": [\"orders\", \"order_items\", \"order_history\"]\n}\n</code></pre></p>"},{"location":"server/tools/#trino_describe_table","title":"trino_describe_table","text":"<p>Get detailed information about a table including columns and sample data.</p>"},{"location":"server/tools/#parameters_5","title":"Parameters","text":"Parameter Type Required Default Description <code>catalog</code> string Yes - Catalog name <code>schema</code> string Yes - Schema name <code>table</code> string Yes - Table name <code>include_sample</code> boolean No true Include sample rows <code>connection</code> string No default Server connection"},{"location":"server/tools/#example_3","title":"Example","text":"<p>\"Describe the customers table\"</p> <p>Response: <pre><code>{\n  \"table\": \"hive.sales.customers\",\n  \"columns\": [\n    {\"name\": \"id\", \"type\": \"bigint\", \"nullable\": false},\n    {\"name\": \"name\", \"type\": \"varchar(255)\", \"nullable\": true},\n    {\"name\": \"email\", \"type\": \"varchar(255)\", \"nullable\": true}\n  ],\n  \"sample\": [\n    [1, \"Alice Smith\", \"alice@example.com\"],\n    [2, \"Bob Jones\", \"bob@example.com\"]\n  ]\n}\n</code></pre></p>"},{"location":"server/tools/#trino_list_connections","title":"trino_list_connections","text":"<p>List all configured Trino server connections.</p>"},{"location":"server/tools/#parameters_6","title":"Parameters","text":"<p>None.</p>"},{"location":"server/tools/#example_4","title":"Example","text":"<p>\"What Trino servers are configured?\"</p> <p>Response: <pre><code>{\n  \"connections\": [\n    {\"name\": \"default\", \"host\": \"prod.trino.example.com\", \"catalog\": \"hive\"},\n    {\"name\": \"staging\", \"host\": \"staging.trino.example.com\", \"catalog\": \"hive\"},\n    {\"name\": \"dev\", \"host\": \"localhost\", \"port\": 8080, \"ssl\": false}\n  ],\n  \"default\": \"default\"\n}\n</code></pre></p>"},{"location":"server/tools/#common-workflows","title":"Common Workflows","text":""},{"location":"server/tools/#data-exploration","title":"Data Exploration","text":"<ol> <li><code>trino_list_catalogs</code> - See available databases</li> <li><code>trino_list_schemas</code> - Browse catalog</li> <li><code>trino_list_tables</code> - Find relevant tables</li> <li><code>trino_describe_table</code> - Understand structure</li> <li><code>trino_query</code> - Query the data</li> </ol>"},{"location":"server/tools/#query-optimization","title":"Query Optimization","text":"<ol> <li>Write initial query</li> <li><code>trino_explain</code> with <code>IO</code> - Check data scanned</li> <li>Add filters to reduce data</li> <li><code>trino_explain</code> with <code>DISTRIBUTED</code> - Check stages</li> <li><code>trino_query</code> - Run optimized query</li> </ol>"},{"location":"server/tools/#next-steps","title":"Next Steps","text":"<ul> <li>Multi-Server - Query multiple clusters</li> <li>Tools API Reference - Complete parameter details</li> </ul>"},{"location":"support/changelog/","title":"Changelog","text":"<p>All notable changes to mcp-trino.</p>"},{"location":"support/changelog/#releases","title":"Releases","text":"Version Date Highlights v0.1.1 2025-01-10 Initial release"},{"location":"support/changelog/#v011-initial-release","title":"v0.1.1 - Initial Release","text":"<p>Features:</p> <ul> <li>Complete MCP server for Trino</li> <li>7 MCP tools: query, explain, list_catalogs, list_schemas, list_tables, describe_table, list_connections</li> <li>Composable Go library for building custom MCP servers</li> <li>Multi-server support for connecting multiple Trino clusters</li> <li>Extensibility framework: middleware, interceptors, transformers</li> <li>Built-in extensions: read-only mode, logging, metrics, query logging, metadata</li> <li>File-based configuration with environment variable expansion</li> <li>Docker and Kubernetes support</li> </ul> <p>Security:</p> <ul> <li>Read-only mode enabled by default</li> <li>Query limits and timeouts</li> <li>SSL/TLS with certificate verification</li> <li>SLSA Level 3 provenance</li> <li>Cosign keyless signatures</li> </ul>"},{"location":"support/changelog/#versioning","title":"Versioning","text":"<p>This project follows Semantic Versioning:</p> <ul> <li>MAJOR version for incompatible API changes</li> <li>MINOR version for backwards-compatible functionality additions</li> <li>PATCH version for backwards-compatible bug fixes</li> </ul>"},{"location":"support/changelog/#upgrade-guide","title":"Upgrade Guide","text":""},{"location":"support/changelog/#checking-current-version","title":"Checking Current Version","text":"<pre><code>mcp-trino --version\n</code></pre>"},{"location":"support/changelog/#upgrading","title":"Upgrading","text":"<p>Homebrew:</p> <pre><code>brew upgrade txn2/tap/mcp-trino\n</code></pre> <p>Docker:</p> <pre><code>docker pull ghcr.io/txn2/mcp-trino:latest\n</code></pre> <p>Go Install:</p> <pre><code>go install github.com/txn2/mcp-trino/cmd/mcp-trino@latest\n</code></pre> <p>Binary:</p> <p>Download the latest release from GitHub Releases.</p>"},{"location":"support/changelog/#breaking-changes","title":"Breaking Changes","text":"<p>Major version upgrades may include breaking changes. Check the release notes before upgrading.</p>"},{"location":"support/changelog/#contributing","title":"Contributing","text":"<p>See the GitHub repository for contribution guidelines.</p>"},{"location":"support/troubleshooting/","title":"Troubleshooting","text":"<p>Solutions to common issues with mcp-trino.</p>"},{"location":"support/troubleshooting/#connection-issues","title":"Connection Issues","text":""},{"location":"support/troubleshooting/#connection-refused","title":"Connection Refused","text":"<p>Symptoms: <pre><code>Error: dial tcp 127.0.0.1:8080: connect: connection refused\n</code></pre></p> <p>Causes: - Trino server not running - Wrong host or port - Firewall blocking connection</p> <p>Solutions:</p> <ol> <li> <p>Verify Trino is running:    <pre><code>curl http://trino.example.com:8080/v1/info\n</code></pre></p> </li> <li> <p>Check host and port configuration:    <pre><code>echo $TRINO_HOST $TRINO_PORT\n</code></pre></p> </li> <li> <p>Test network connectivity:    <pre><code>nc -zv trino.example.com 443\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#connection-timeout","title":"Connection Timeout","text":"<p>Symptoms: <pre><code>Error: connection timeout after 30s\n</code></pre></p> <p>Causes: - Network latency - Firewall timeout - DNS resolution issues</p> <p>Solutions:</p> <ol> <li> <p>Check DNS resolution:    <pre><code>nslookup trino.example.com\n</code></pre></p> </li> <li> <p>Test with IP address:    <pre><code>export TRINO_HOST=10.0.0.1\n</code></pre></p> </li> <li> <p>Increase connection timeout (if supported)</p> </li> </ol>"},{"location":"support/troubleshooting/#authentication-errors","title":"Authentication Errors","text":""},{"location":"support/troubleshooting/#invalid-credentials","title":"Invalid Credentials","text":"<p>Symptoms: <pre><code>Error: Authentication failed: Invalid credentials\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Verify credentials:    <pre><code>echo \"User: $TRINO_USER\"\n# Don't echo password, but verify it's set\n[ -n \"$TRINO_PASSWORD\" ] &amp;&amp; echo \"Password is set\"\n</code></pre></p> </li> <li> <p>Test credentials directly:    <pre><code>trino --server https://trino.example.com \\\n      --user $TRINO_USER \\\n      --password\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#user-not-found","title":"User Not Found","text":"<p>Symptoms: <pre><code>Error: User 'unknown' does not exist\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Verify username:    <pre><code>export TRINO_USER=correct_username\n</code></pre></p> </li> <li> <p>Check user exists in Trino's authentication system</p> </li> </ol>"},{"location":"support/troubleshooting/#ssl-certificate-problems","title":"SSL Certificate Problems","text":""},{"location":"support/troubleshooting/#certificate-verification-failed","title":"Certificate Verification Failed","text":"<p>Symptoms: <pre><code>Error: x509: certificate signed by unknown authority\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Install the CA certificate:    <pre><code># Linux\nsudo cp ca.crt /usr/local/share/ca-certificates/\nsudo update-ca-certificates\n\n# macOS\nsudo security add-trusted-cert -d -r trustRoot \\\n  -k /Library/Keychains/System.keychain ca.crt\n</code></pre></p> </li> <li> <p>For development only, disable verification:    <pre><code>export TRINO_SSL_VERIFY=false\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#certificate-expired","title":"Certificate Expired","text":"<p>Symptoms: <pre><code>Error: x509: certificate has expired or is not yet valid\n</code></pre></p> <p>Solutions:</p> <ol> <li>Renew the certificate on the Trino server</li> <li>Check system clock is correct:    <pre><code>date\n</code></pre></li> </ol>"},{"location":"support/troubleshooting/#query-timeout-errors","title":"Query Timeout Errors","text":""},{"location":"support/troubleshooting/#query-exceeded-timeout","title":"Query Exceeded Timeout","text":"<p>Symptoms: <pre><code>Error: Query exceeded timeout of 120s\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Increase timeout:    <pre><code>export TRINO_TIMEOUT=300\n</code></pre></p> </li> <li> <p>Optimize the query:</p> </li> <li>Add filters to reduce data scanned</li> <li>Use LIMIT to reduce result size</li> <li> <p>Check query execution plan</p> </li> <li> <p>Request specific timeout:    <pre><code>{\n  \"sql\": \"SELECT ...\",\n  \"timeout_seconds\": 300\n}\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#query-killed","title":"Query Killed","text":"<p>Symptoms: <pre><code>Error: Query killed by Trino coordinator\n</code></pre></p> <p>Causes: - Query exceeded Trino resource limits - Coordinator memory pressure</p> <p>Solutions:</p> <ol> <li>Reduce query complexity</li> <li>Contact Trino administrator about resource limits</li> </ol>"},{"location":"support/troubleshooting/#permission-denied","title":"Permission Denied","text":""},{"location":"support/troubleshooting/#table-access-denied","title":"Table Access Denied","text":"<p>Symptoms: <pre><code>Error: Access Denied: Cannot select from table hive.default.users\n</code></pre></p> <p>Solutions:</p> <ol> <li>Verify user has SELECT permission</li> <li>Check Trino access control rules</li> <li>Use a different catalog/schema with access</li> </ol>"},{"location":"support/troubleshooting/#catalog-not-found","title":"Catalog Not Found","text":"<p>Symptoms: <pre><code>Error: Catalog 'unknown' does not exist\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>List available catalogs:    <pre><code>SHOW CATALOGS\n</code></pre></p> </li> <li> <p>Update configuration:    <pre><code>export TRINO_CATALOG=existing_catalog\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#schema-not-found","title":"Schema Not Found","text":"<p>Symptoms: <pre><code>Error: Schema 'unknown' does not exist\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>List schemas in catalog:    <pre><code>SHOW SCHEMAS IN catalog_name\n</code></pre></p> </li> <li> <p>Update configuration:    <pre><code>export TRINO_SCHEMA=existing_schema\n</code></pre></p> </li> </ol>"},{"location":"support/troubleshooting/#write-operation-blocked","title":"Write Operation Blocked","text":"<p>Symptoms: <pre><code>Error: Write operation blocked: INSERT statements are not allowed in read-only mode\n</code></pre></p> <p>Causes: - Read-only mode is enabled (default)</p> <p>Solutions:</p> <ol> <li> <p>If you need write access, disable read-only mode:    <pre><code>export MCP_TRINO_EXT_READONLY=false\n</code></pre></p> </li> <li> <p>Or use SELECT instead of INSERT/UPDATE/DELETE</p> </li> </ol>"},{"location":"support/troubleshooting/#query-syntax-errors","title":"Query Syntax Errors","text":"<p>Symptoms: <pre><code>Error: line 1:15: mismatched input 'FORM'. Expecting: 'FROM', ...\n</code></pre></p> <p>Solutions:</p> <ol> <li>Check SQL syntax</li> <li>Verify table and column names</li> <li>Use DESCRIBE to check column names:    <pre><code>DESCRIBE catalog.schema.table\n</code></pre></li> </ol>"},{"location":"support/troubleshooting/#verbose-logging","title":"Verbose Logging","text":"<p>Enable detailed logging for debugging:</p> <pre><code># Enable request logging\nexport MCP_TRINO_EXT_LOGGING=true\n\n# Enable query logging\nexport MCP_TRINO_EXT_QUERYLOG=true\n\n# Run with logs to stderr\nmcp-trino 2&gt;mcp-trino.log\n</code></pre>"},{"location":"support/troubleshooting/#debug-mode","title":"Debug Mode","text":""},{"location":"support/troubleshooting/#test-connection","title":"Test Connection","text":"<pre><code># Simple connection test\nTRINO_HOST=trino.example.com \\\nTRINO_USER=user \\\nTRINO_PASSWORD=pass \\\nmcp-trino --test-connection\n</code></pre>"},{"location":"support/troubleshooting/#verify-configuration","title":"Verify Configuration","text":"<pre><code># Print effective configuration\nmcp-trino --show-config\n</code></pre>"},{"location":"support/troubleshooting/#direct-trino-query","title":"Direct Trino Query","text":"<p>Test with the Trino CLI to isolate issues:</p> <pre><code>trino --server https://trino.example.com \\\n      --user user \\\n      --password \\\n      --execute \"SELECT 1\"\n</code></pre>"},{"location":"support/troubleshooting/#docker-troubleshooting","title":"Docker Troubleshooting","text":""},{"location":"support/troubleshooting/#container-wont-start","title":"Container Won't Start","text":"<pre><code># Check logs\ndocker logs mcp-trino\n\n# Run interactively\ndocker run -it --rm \\\n  -e TRINO_HOST=trino.example.com \\\n  -e TRINO_USER=user \\\n  ghcr.io/txn2/mcp-trino:latest\n</code></pre>"},{"location":"support/troubleshooting/#network-issues-in-docker","title":"Network Issues in Docker","text":"<pre><code># Use host network for debugging\ndocker run --network=host \\\n  -e TRINO_HOST=localhost \\\n  ghcr.io/txn2/mcp-trino:latest\n</code></pre>"},{"location":"support/troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you can't resolve an issue:</p> <ol> <li>Check the GitHub Issues</li> <li>Open a new issue with:</li> <li>mcp-trino version</li> <li>Configuration (without credentials)</li> <li>Error message</li> <li>Steps to reproduce</li> </ol>"}]}